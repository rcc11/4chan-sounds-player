// ==UserScript==
// @name         4chan sounds player
// @version      3.3.1-6627bac
// @namespace    rccom
// @description  A player designed for 4chan sounds threads.
// @author       RCC
// @match        *://boards.4chan.org/*
// @match        *://boards.4channel.org/*
// @match        *://desuarchive.org/*
// @match        *://arch.b4k.co/*
// @match        *://archived.moe/*
// @match        *://warosu.org/*
// @grant        GM.getValue
// @grant        GM.setValue
// @grant        GM.xmlHttpRequest
// @grant        GM_addValueChangeListener
// @connect      4chan.org
// @connect      4channel.org
// @connect      a.4cdn.org
// @connect      desu-usergeneratedcontent.xyz
// @connect      arch-img.b4k.co
// @connect      4cdn.org
// @connect      a.pomf.cat
// @connect      pomf.cat
// @connect      files.catbox.moe
// @connect      catbox.moe
// @connect      share.dmca.gripe
// @connect      z.zz.ht
// @connect      zz.ht
// @connect      too.lewd.se
// @connect      lewd.se
// @connect      *
// @run-at       document-start
// @updateURL    https://raw.githubusercontent.com/rcc11/4chan-sounds-player/master/dist/4chan-sounds-player-beta.meta.js
// @downloadURL  https://raw.githubusercontent.com/rcc11/4chan-sounds-player/master/dist/4chan-sounds-player-beta.user.js
// ==/UserScript==


!function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=6)}([function(e,t){const a=e.exports;function n(e,t){const a=Math.max(0,t-e);return[a%60,Math.floor(a/60)%60,Math.floor(a/60/60)%24,Math.floor(a/60/60/24)%7,Math.floor(a/60/60/24/7)]}e.exports.set=function(e,t,a){const n=t.split("."),s=n.pop(),l=n.reduce((e,t)=>e[t]||(e[t]={}),e);return l&&(l[s]=a),e},e.exports.get=function(e,t,a){if("string"!=typeof t)return a;const n=t.split("."),s=n.pop(),l=n.reduce((e,t)=>e&&e[t],e);return l&&Object.prototype.hasOwnProperty.call(l,s)?l[s]:a},e.exports.isEqual=function e(t,n,s=!0){if(typeof t!=typeof n)return!1;if(Array.isArray(t,n))return t===n||t.length===n.length&&t.every((t,a)=>e(t,n[a]));if(t&&n&&"object"==typeof t&&t!==n){const e=Object.keys(t);return e.push(...Object.keys(n).filter(t=>!e.includes(t))),e.every(e=>a.isEqual(t[e],n[e]))}return s?t===n:t==n},e.exports.toDuration=function(e){e=Math.floor(e||0);let[t,a,s]=n(0,e);return t<10&&(t="0"+t),(s?s+":":"")+a+":"+t},e.exports.timeAgo=function(e){const[t,a,s,l,o]=n(Math.floor(e),Math.floor(Date.now()/1e3));return o>1?o+" weeks ago":l>0?l+(1===l?" day":" days")+" ago":s>0?s+(1===s?" hour":" hours")+" ago":a>0?a+(1===a?" minute":" minutes")+" ago":t+(1===t?" second":" seconds")+" ago"},e.exports.element=function(e,t,a={}){const n=document.createElement("div");n.innerHTML=e;const s=n.children[0];t&&t.appendChild(s);for(let e in a)s.addEventListener(e,a[e]);return s},e.exports.elementBefore=function(e,t,n={}){const s=a.element(e,null,n);return t.parentNode.insertBefore(s,t),s},e.exports.noDefault=(e,...t)=>n=>{n.preventDefault();("function"==typeof e?e:a.get(Player,e))(n,...t)}},function(e,t,a){e.exports={fcSounds:'<svg width="452" height="257" xmlns="http://www.w3.org/2000/svg"><g><text font-weight="bold" font-style="italic" font-family="Helvetica, Arial, sans-serif" font-size="250" y="197" fill-opacity="0.05" fill="#000000">4sp</text></g></svg>',arrowClockwise:a(19).default,arrowsCollapse:a(20).default,arrowDown:a(21).default,arrowsExpand:a(22).default,arrowRepeat:a(23).default,arrowUp:a(24).default,boxArrowInLeft:a(25).default,boxArrowRight:a(26).default,chatRightQuote:a(27).default,checkSquare:a(28).default,chevronDown:a(29).default,chevronUp:a(30).default,close:a(31).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),gear:a(32).default,fileEarmarkImage:a(33).default,fileEarmarkMusic:a(34).default,filter:a(35).default,fullscreen:a(36).default,fullscreenExit:a(37).default,github:a(38).default,image:a(39).default,infoCircle:a(40).default,link:a(41).default,musicNoteList:a(42).default,play:a(43).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),playFill:a(44).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),pause:a(45).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),pauseFill:a(46).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),plus:a(47).default,reboot:a(48).default,search:a(49).default,shuffle:a(50).default,skipEnd:a(51).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),skipEndFill:a(52).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),skipStart:a(53).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),skipStartFill:a(54).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),soundwave:a(55).default,square:a(56).default,tools:a(57).default,trash:a(58).default,volumeMute:a(59).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"'),volumeMuteFill:a(60).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"'),volumeUp:a(61).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"'),volumeUpFill:a(62).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"')}},function(e,t){e.exports={"4chan":{postIdPrefix:"p",posts:".post",filename:{".fileText .file-info .fnfull":"textContent",".fileText .file-info > a":"textContent",".fileText > a":"title",".fileText":"textContent"},thumb:".fileThumb",playLink:{class:ns+"-play-link",text:"play",relative:".fileText",prependText:" "},styleFetcher:"post reply style-fetcher",limitWidthOf:".thread > .postContainer"},FoolFuuka:{postIdPrefix:"",posts:"article",filename:{".thread_image_box .post_file_filename":"textContent",".post_file_filename":"title"},thumb:".thread_image_link",playLink:{class:ns+"-play-link btnr",text:"Play",relative:".post_controls"},styleFetcher:"post_wrapper style-fetcher",limitWidthOf:".posts > article.post"},Fuuka:{postIdPrefix:"p",posts:".content > div, td.reply",filename:{":scope > span":"textContent"},filenameParser:e=>e.split(", ").slice(2).join(", "),thumb:".thumb",playLink:{class:ns+"-play-link",text:"play",relative:"br:nth-of-type(2)",before:!0,prependText:" [",appendText:"]"},styleFetcher:"reply style-fetcher",limitWidthOf:".content > div, .content > table"}}[Site]},function(e,t,a){e.exports=[...a(9),...a(10),...a(11),...a(12),...a(14),{property:"shuffle",default:!1},{property:"repeat",default:"all"},{property:"viewStyle",default:"playlist"},{property:"showPlaylistSearch",default:!0},{property:"offsetTop",default:"0"},{property:"offsetBottom",default:"0"}]},function(e,t,a){(function(t){const n=a(2),s=/^(https?:)?\/\//,l=/(.*?)[[({](?:audio|sound)[ =:|$](.*?)[\])}]/gi;let o=0;function r(e,a){try{let s=e.parentElement,l=s&&s.parentElement;if(e.classList.contains("style-fetcher")||l&&"qp"===l.id||s&&s.classList.contains("noFile"))return;let o=e.querySelector(`.${ns}-play-link`);if(o){const e=o.getAttribute("data-id");return void(o.onclick=()=>Player.play(Player.sounds.find(t=>t.id===e)))}let r=null,c=n.filename;if(Object.keys(c).some((function(t){const a=e.querySelector(t);return a&&(r=a[c[t]])})),!r)return;n.filenameParser&&(r=n.filenameParser(r));const u=e.id.slice(n.postIdPrefix.length),p=e.querySelector(n.thumb).closest("a"),y=p&&p.href,h=p&&p.querySelector("img"),g=h&&h.src,f="Fuuka"===Site?e.querySelector(":scope > a:nth-of-type(3)").href.split("/").pop():h&&h.getAttribute("data-md5"),m=d(r,y,u,g,f);if(!m.length)return;const v=m[0].id,P=n.playLink,$=`<a href="javascript:;" class="${P.class}" data-id="${v}">${P.text}</a>`,w=P.relative&&e.querySelector(P.relative);return P.prependText&&i(P.prependText,P.before,w),o=P.before?t.elementBefore($,w):t.element($,w),P.appendText&&i(P.appendText,P.before,w),o.onclick=()=>Player.play(m[0]),m.forEach(e=>Player.add(e,a)),m.length>0}catch(t){Player.logError("There was an issue parsing the files. Please check the console for details.",t),console.log("[4chan sounds player]",e)}}function i(e,t,a){const n=e&&document.createTextNode(e);t?a.parentNode.insertBefore(n,a):a.appendChild(n)}function d(e,t,a,n,r,i){if(!e)return[];const d=t.endsWith("webm")?n:t;e=e.replace(/-/,"/");const c=[];let u;for(;null!==(u=l.exec(e));)c.push(u);c.length||"always"!==Player.config.addWebm&&("soundBoards"!==Player.config.addWebm||"gif"!==Board&&"wsg"!==Board)||!e.endsWith(".webm")||c.push([null,e.slice(0,-5),t]);const p=c[0]&&c[0][1]||a||"Local Sound "+o;return c.length&&!a&&o++,c.reduce((l,u,y)=>{let h=u[2];const g=(a||"local"+o)+":"+y,f=u[1].trim(),m=f||p+(c.length>1?` (${y+1})`:""),v=h===t;try{h.includes("%")&&(h=decodeURIComponent(h)),h.startsWith("blob:")||null!==h.match(s)||(h=location.protocol+"//"+h)}catch(e){return l}const P={src:h,id:g,title:m,name:f,post:a,image:t,imageOrThumb:d,filename:e,thumb:n,imageMD5:r,standaloneVideo:v};return(i||Player.acceptedSound(P))&&l.push(P),l},[])}e.exports={parseFiles:function(e,t){let a=!1;(e.classList.contains("post")?[e]:e.querySelectorAll(n.posts)).forEach(e=>r(e,t)&&(a=!0)),a&&t&&Player.container&&Player.playlist.render()},parsePost:r,parseFileName:d}}).call(this,a(0))},function(e,t){window.ns="fcsp",window.is4chan=location.hostname.includes("4chan.org")||location.hostname.includes("4channel.org"),window.isChanX=document.documentElement&&document.documentElement.classList.contains("fourchan-x"),window.Board=location.pathname.split("/")[1],window.Site=is4chan?"4chan":((document.head.querySelector('meta[name="generator"]')||{}).content||"").includes("FoolFuuka")?"FoolFuuka":((document.head.querySelector('meta[name="description"]')||{}).content||"").includes("Fuuka")?"Fuuka":"FoolFuuka";class a extends Error{constructor(e,t,a){super(e),this.reason=e,this.type=t,this.error=a}}window.PlayerError=a},function(e,t,a){"use strict";async function n(){a(5);const e=a(7),{parseFiles:t}=a(4);await e.initialize(),t(document.body,!0);new MutationObserver((function(e){e.forEach((function(e){"childList"===e.type&&e.addedNodes.forEach((function(e){e.nodeType===Node.ELEMENT_NODE&&t(e)}))}))})).observe(document.body,{childList:!0,subtree:!0})}document.addEventListener("4chanXInitFinished",n),setTimeout((function(){a(5),isChanX||("loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n))}),0)},function(e,t,a){(function(t){const n={settings:a(8),events:a(63),actions:a(64),colorpicker:a(65),controls:a(67),display:a(69),footer:a(73),header:a(74),hotkeys:a(75),minimised:a(76),playlist:a(77),position:a(81),theme:a(82),threads:a(86),tools:a(91),userTemplate:a(93)},s=window.Player=e.exports={ns:ns,components:n,audio:new Audio,sounds:[],isHidden:!0,container:null,ui:{},_public:[],config:{},$:(...e)=>s.container&&s.container.querySelector(...e),$all:(...e)=>s.container&&s.container.querySelectorAll(...e),initialize:async function(){if(!s.initialized){s.initialized=!0;try{s.sounds=[];for(let e in n)n[e].initialize&&await n[e].initialize();s.display.createPlayerButton(),s.display.render(),document.addEventListener("PlayerEvent",e=>{if(e.detail.action&&s._public.includes(e.detail.action))return t.get(s,e.detail.action).apply(window,e.detail.arguments)})}catch(e){throw s.logError("There was an error initialzing the sound player. Please check the console for details.",e),e}}},getHandler:function(e){return"string"==typeof e?t.get(s,e):e},compareIds:function(e,t){const[a,n]=e.split(":"),[s,l]=t.split(":"),o=a-s;return 0!==o?o:n-l},acceptedSound:function({src:e,imageMD5:t}){try{const a=new URL(e),n=a.hostname.toLowerCase();return!s.config.filters.find(e=>e===t||e===n+a.pathname)&&s.config.allow.find(e=>n===e||n.endsWith("."+e))}catch(e){return!1}},syncTab:(e,t)=>"undefined"!=typeof GM_addValueChangeListener&&GM_addValueChangeListener(e,(e,a,n,s)=>{s&&t(n,a)}),logError:function(e,t,a){console.error("[4chan sounds player]",e,t),t instanceof PlayerError&&(t.error&&console.error("[4chan sound player]",t.error),e=t.reason,a=t.type||a),s.alert(e,a||"error",5)},alert:function(e,a="info",n=5){isChanX?(e=t.element(`<span>${e}</span`),document.dispatchEvent(new CustomEvent("CreateNotification",{bubbles:!0,detail:{content:e,type:a,lifetime:n}}))):"undefined"!=typeof Feedback&&Feedback.showMessage(e,"info"===a?"notify":"error",1e3*n)}};for(let e in n)s[e]=n[e],(s[e].atRoot||[]).forEach(t=>s[t]=s[e][t]),(s[e].public||[]).forEach(t=>{s._public.push((s[e].atRoot||[]).includes(t)?t:`${e}.${t}`)})}).call(this,a(0))},function(e,t,a){(function(t){const n=a(3),s=a(15),l=a(16);e.exports={atRoot:["set"],public:["set","export","import","reset","load"],hosts:l,template:a(18),changelog:"https://github.com/rcc11/4chan-sounds-player/releases",delegatedEvents:{click:{[`.${ns}-settings .${ns}-heading-action`]:"settings._handleAction",[`.${ns}-settings-tab`]:"settings._handleTab",[`.${ns}-settings-reset-all`]:t.noDefault(()=>Player.settings.load({},{applyDefault:!0,ignore:["viewStyle"]})),[`.${ns}-settings-export`]:"settings.export",[`.${ns}-settings-import`]:"settings.import"},focusout:{[`.${ns}-settings input, .${ns}-settings textarea`]:"settings._handleChange"},change:{[`.${ns}-settings input[type=checkbox], .${ns}-settings select`]:"settings._handleChange"},keydown:{[`.${ns}-key-input`]:"settings.handleKeyChange"}},initialize:async function(){Player.settings.view="Display",Player.theme.applyBoardTheme({bypassRender:!0}),await Player.settings.load(await GM.getValue("settings")||{},{applyDefault:!0,bypassAll:!0}),Player.config.showUpdatedNotification&&Player.config.VERSION&&"3.3.1-6627bac"!==Player.config.VERSION&&Player.alert(`4chan Sounds Player has been updated to <a href="${Player.settings.changelog}" target="_blank">version 3.3.1-6627bac</a>.`),Player.on("hide",(function(){Player.config.pauseOnHide&&Player.pause()})),Player.syncTab("settings",e=>Player.settings.load(e,{bypassSave:!0,applyDefault:!0,ignore:["viewStyle"]}))},render:function(){const e=Player.$(`.${ns}-settings`);e.innerHTML=Player.settings.template(),Player.events.addUndelegatedListeners(e,Player.settings.undelegatedEvents),Player.display.initPopovers(e)},set:function(e,a,{bypassAll:n,bypassValidation:s,bypassSave:l,bypassRender:o,silent:r,bypassStylesheet:i,settingConfig:d}={}){d=d||Player.settings.findDefault(e);const c=t.get(Player.config,e);if(s||!t.isEqual(c,a))return t.set(Player.config,e,a),n||(!i&&d&&d.updateStylesheet&&Player.display.updateStylesheet(),!r&&Player.trigger("config",e,a,c),!r&&Player.trigger("config:"+e,a,c),!l&&Player.settings.save(),!o&&d.displayGroup&&Player.settings.render()),[c,a]},reset:function(e,t){let a=Player.settings.findDefault(e);Player.set(e,a.default,{...t,settingConfig:a})},load:async function(e,a={}){"string"==typeof e&&(e=JSON.parse(e));const s={};n.forEach((function n(l){if(l.settings)return l.settings.forEach(e=>n({property:l.property,default:l.default,...e}));if(a.ignore&&a.ignore.includes(l.property))return;let o=t.get(e,l.property,a.applyDefault?l.default:void 0);if(void 0!==o){l.mix&&(o={...l.default,...o||{}});const e=Player.set(l.property,o,{bypassAll:!0,settingConfig:l});e&&(s[l.property]=e)}})),Object.entries(await Player.settings.migrate(e.VERSION)).forEach(([e,[t,a]])=>{s[e]=[s[e]?s[e][1]:t,a]}),a.bypassAll||(!a.bypassStylesheet&&Player.display.updateStylesheet(),!a.silent&&Object.entries(s).forEach(([e,[t,a]])=>{Player.trigger("config",e,a,t),Player.trigger("config:"+e,a,t)}),!a.bypassSave&&Player.settings.save(),!a.bypassRender&&Player.settings.render())},save:function(){try{const e=n.reduce((function e(a,n){if(n.settings)n.settings.forEach(t=>e(a,{property:n.property,default:n.default,...t}));else{let e=t.get(Player.config,n.property);void 0===e||t.isEqual(e,n.default)||(n.mix&&(e=Object.keys(e).reduce((a,s)=>(t.isEqual(n.default[s],e[s])||(a[s]=e[s]),a),{})),t.set(a,n.property,e))}return a}),{});return e.viewStyle=Player.playlist._lastView,e.VERSION="3.3.1-6627bac",GM.setValue("settings",JSON.stringify(e))}catch(e){Player.logError("There was an error saving the sound player settings.",e)}},migrate:async function(e){if(!e||"3.3.1-6627bac"===e)return{};const t={};for(let a=0;a<s.length;a++){let n=s[a];if(Player.settings.compareVersions(e,n.version)<0)try{console.log("[4chan sound player] Migrate:",n.name),Object.entries(await n.run()).forEach(([e,[a,n]])=>{t[e]=[a,t[e]?t[e][1]:n]})}catch(e){console.error(e)}}return t},compareVersions:function(e,t){const[a,n]=e.split("-"),[s,l]=t.split("-"),o=a.split("."),r=s.split(".");for(let e=0;e<3;e++){if(+o[e]>+r[e])return 1;if(+o[e]<+r[e])return-1}return n!==l},findDefault:function(e){let t;return n.find((function(a){if(a.property===e)return t=a;if(a.settings){let n=a.settings.find(t=>t.property===e);return n&&(t={...a,settings:null,...n})}return!1})),t||{property:e}},toggle:function(e){let t=Player.$(`.${ns}-settings :focus`);if(t&&t.blur(),!e&&"settings"===Player.config.viewStyle)return Player.playlist.restore();"settings"!==Player.config.viewStyle&&Player.display.setViewStyle("settings"),e&&e!==Player.settings.view&&Player.settings.showGroup(e)},_handleTab:function(e){const t=e.eventTarget.getAttribute("data-group");t&&(e.preventDefault(),Player.settings.showGroup(t))},showGroup:function(e){Player.settings.view=e;const t=Player.$(`.${ns}-settings-group.active`),a=Player.$(`.${ns}-settings-tab.active`);t&&t.classList.remove("active"),a&&a.classList.remove("active"),Player.$(`.${ns}-settings-group[data-group="${e}"]`).classList.add("active"),Player.$(`.${ns}-settings-tab[data-group="${e}"]`).classList.add("active")},import:async function(e){e&&e.preventDefault();const a=t.element('<input type="file">'),n=async()=>{let e;try{e=await(await fetch(URL.createObjectURL(a.files[0]))).json()}catch(e){Player.logError(`Expected a JSON config file and got ${a.files[0].type}.`,e,"warning")}a.removeEventListener("change",n),Player.settings.load(e)};a.addEventListener("change",n),a.click()},export:async function(e){e&&e.preventDefault();const a=e&&e.shiftKey?JSON.stringify(Player.config,null,4):await GM.getValue("settings")||"{}",n=new Blob([a],{type:"application/json"}),s=t.element(`<a href="${URL.createObjectURL(n)}" download="4chan-sp-config.json" rel="noopener" target="_blank"></a>`);s.click(),URL.revokeObjectURL(s.href)},_handleChange:function(e){try{const a=e.eventTarget,n=a.getAttribute("data-property");if(!n)return;let s=Player.settings.findDefault(n);const l=t.get(Player.config,n);let o=a["checkbox"===a.getAttribute("type")?"checked":"value"];s.parse&&(o=Player.getHandler(s.parse)(o,l,e)),s&&s.split&&(o=o.split(decodeURIComponent(s.split))),t.isEqual(l,o,!s.looseCompare)||Player.set(n,o,{bypassValidation:!0,bypassRender:!0,settingConfig:s})}catch(e){Player.logError("There was an error updating the setting.",e)}},handleKeyChange:function(e){e.preventDefault(),"Shift"!==e.key&&"Control"!==e.key&&"Meta"!==e.key&&(e.eventTarget.value=Player.hotkeys.stringifyKey(e))},_handleAction:function(e){e.preventDefault();const a=e.eventTarget.getAttribute("data-property"),n=e.eventTarget.getAttribute("data-handler"),s=t.get(Player,n);s&&s(a,e)}}}).call(this,a(0))},function(e,t){e.exports=[{property:"autoshow",default:!0,title:"Autoshow",description:"Automatically show the player when the thread contains sounds.",displayGroup:"Display"},{property:"pauseOnHide",default:!0,title:"Pause On Hide",description:"Pause the player when it's hidden.",displayGroup:"Display",allowInTheme:!0},{property:"showUpdatedNotification",default:!0,title:"Show Update Notifications",description:"Show notifications when the player is successfully updated.",displayGroup:"Display"},{property:"hoverImages",title:"Hover Images",default:!1,allowInTheme:!0},{title:"Controls",displayGroup:"Display",allowInTheme:!0,settings:[{property:"preventControlWrapping",title:"Prevent Wrapping",description:"Hide controls to prevent wrapping when the player is too small",default:!0},{property:"controlsHideOrder",title:"Hide Order",description:"Order controls are hidden in to prevent wrapping. Available controls are previous, next, seek-bar, time, duration, volume, mute, volume-bar, and fullscreen.",default:["fullscreen","duration","volume-bar","seek-bar","time","previous"],displayMethod:(e,t)=>`<div class="${ns}-col"><textarea ${t}>${e}</textarea></div>`,format:e=>e.join("\n"),parse:e=>e.split(/\s+/)}]},{title:"Minimised Display",description:"Optional displays for when the player is minimised.",displayGroup:"Display",allowInTheme:!0,settings:[{property:"pip",title:"Thumbnail",description:"Display a fixed thumbnail of the playing sound in the bottom right of the thread.",default:!0},{property:"maxPIPWidth",title:"Max Width",description:"Maximum width for the thumbnail.",default:"150px",updateStylesheet:!0},{property:"chanXControls",title:"4chan X Header Controls",description:"Show playback controls in the 4chan X header. The display can be customised in Settings>Theme.",displayMethod:isChanX||null,options:{always:"Always",closed:"Only with the player closed",never:"Never"}}]},{title:"Thread",displayGroup:"Display",allowInTheme:!0,settings:[{property:"autoScrollThread",description:"Automatically scroll the thread to posts as sounds play.",title:"Auto Scroll",default:!1},{property:"limitPostWidths",description:"Limit the width of posts so they aren't hidden under the player.",title:"Limit Post Widths",default:!0},{property:"minPostWidth",title:"Minimum Width",default:"50%"}]},{property:"threadsViewStyle",title:"Threads View",description:"How threads in the threads view are listed.",settings:[{title:"Display",default:"table",options:{table:"Table",board:"Board"}}]},{title:"Colors",displayGroup:"Display",property:"colors",updateStylesheet:!0,allowInTheme:!0,class:ns+"-colorpicker-input",displayMethod:(e,t)=>`<div class="${ns}-col">\n\t\t\t\t<input type="text" ${t} value="${e}">\n\t\t\t\t<div class="${ns}-cp-preview" style="background: ${e}"></div>\n\t\t\t</div>`,actions:[{title:"Match Theme",handler:"display.forceBoardTheme"}],settings:[{property:"colors.text",default:"#000000",title:"Text"},{property:"colors.background",default:"#d6daf0",title:"Background"},{property:"colors.border",default:"#b7c5d9",title:"Border"},{property:"colors.odd_row",default:"#d6daf0",title:"Odd Row"},{property:"colors.even_row",default:"#b7c5d9",title:"Even Row"},{property:"colors.playing",default:"#98bff7",title:"Playing Row"},{property:"colors.dragging",default:"#c396c8",title:"Dragging Row"},{property:"colors.controls_background",default:"#3f3f44",title:"Controls Background",description:"The controls container element background.",actions:[{title:"Reset",handler:"settings.reset"}]},{property:"colors.controls_inactive",default:"#FFFFFF",title:"Control Items",description:"The playback controls and played bar.",actions:[{title:"Reset",handler:"settings.reset"}]},{property:"colors.controls_active",default:"#00b6f0",title:"Focused Control Items",description:"The control items when hovered.",actions:[{title:"Reset",handler:"settings.reset"}]},{property:"colors.controls_empty_bar",default:"#131314",title:"Volume/Seek Bar Background",decscription:"The background of the volume and seek bars.",actions:[{title:"Reset",handler:"settings.reset"}]},{property:"colors.controls_loaded_bar",default:"#5a5a5b",title:"Loaded Bar Background",description:"The loaded bar within the seek bar.",actions:[{title:"Reset",handler:"settings.reset"}]},{property:"colors.page_background",default:"rgb(238, 242, 255)",displayMethod:null,allowInTheme:!1}]}]},function(e,t){e.exports=[{property:"addWebm",title:"Include WebM",description:"Whether to add all WebM files regardless of a sound filename.",default:"soundBoards",displayGroup:"Filter",options:{always:"Always",soundBoards:"Boards with sound",never:"Never"}},{property:"allow",title:"Allowed Hosts",description:"Which domains sounds are allowed to be loaded from.",default:["4cdn.org","catbox.moe","dmca.gripe","lewd.se","pomf.cat","zz.ht"],actions:[{title:"Reset",handler:"settings.reset"}],displayGroup:"Filter",split:"\n"},{property:"filters",default:["# Image MD5 or sound URL"],title:"Filters",description:"List of URLs or image MD5s to filter, one per line.\nLines starting with a # will be ignored.",actions:[{title:"Reset",handler:"settings.reset"}],displayGroup:"Filter",split:"\n"}]},function(e,t){const a="mediaSession"in navigator,n={displayGroup:"Keybinds",format:"hotkeys.stringifyKey",parse:"hotkeys.parseKey",class:ns+"-key-input",property:"hotkey_bindings",allowInTheme:!0};e.exports=[{title:"Keybinds",displayGroup:"Keybinds",settings:[{property:"hotkeys",default:"open",title:"Enabled",options:{always:"Always",open:"Only with the player open",never:"Never"}},{property:"hardwareMediaKeys",title:"Hardware Media Keys",displayGroup:"Keybinds",description:"Enable playback control via hardware media keys."+(a?"":" Your browser does not support this feature."),default:a,attrs:!a&&"disabled"}]},{title:"Playback",themeFieldTitle:"Playback Keybinds",...n,settings:[{property:"hotkey_bindings.playPause",title:"Play/Pause",keyHandler:"togglePlay",ignoreRepeat:!0,default:{key:" "}},{property:"hotkey_bindings.previous",title:"Previous",keyHandler:()=>Player.previous({force:!0}),ignoreRepeat:!0,default:{key:"arrowleft"}},{property:"hotkey_bindings.next",title:"Next",keyHandler:()=>Player.next({force:!0}),ignoreRepeat:!0,default:{key:"arrowright"}},{property:"hotkey_bindings.previousGroup",title:"Previous Group",keyHandler:()=>Player.previous({force:!0,group:!0}),ignoreRepeat:!0,default:{shiftKey:!0,key:"arrowleft"}},{property:"hotkey_bindings.nextGroup",title:"Next Group",keyHandler:()=>Player.next({force:!0,group:!0}),ignoreRepeat:!0,default:{shiftKey:!0,key:"arrowright"}},{property:"hotkey_bindings.volumeUp",title:"Volume Up",keyHandler:"actions.volumeUp",default:{shiftKey:!0,key:"arrowup"}},{property:"hotkey_bindings.volumeDown",title:"Volume Down",keyHandler:"actions.volumeDown",default:{shiftKey:!0,key:"arrowdown"}}]},{title:"Display",themeFieldTitle:"Display Keybinds",...n,settings:[{property:"hotkey_bindings.closePlayer",title:"Close",keyHandler:"display.close",default:{key:""}},{property:"hotkey_bindings.togglePlayer",title:"Show/Hide",keyHandler:"display.toggle",default:{key:"h"}},{property:"hotkey_bindings.toggleFullscreen",title:"Toggle Fullscreen",keyHandler:"display.toggleFullScreen",default:{key:""}},{property:"hotkey_bindings.togglePlaylist",title:"Toggle Playlist",keyHandler:"playlist.toggleView",default:{key:""}},{property:"hotkey_bindings.toggleSearch",title:"Toggle Playlist Search",keyHandler:()=>Player.set("showPlaylistSearch",!Player.config.showPlaylistSearch),default:{key:""}},{property:"hotkey_bindings.scrollToPlaying",title:"Jump To Playing",keyHandler:()=>Player.playlist.scrollToPlaying(),default:{key:""}},{property:"hotkey_bindings.toggleHoverImages",title:"Toggle Hover Images",keyHandler:"playlist.toggleHoverImages",default:{key:""}},{property:"hotkey_bindings.toggleAutoScroll",title:"Toggle Thread Scroll",keyHandler:()=>Player.set("autoScrollThread",!Player.config.autoScrollThread),default:{key:""}}]},{title:"Theme",themeFieldTitle:"Theme Keybinds",...n,settings:[{property:"hotkey_bindings.nextTheme",title:"Next Theme",keyHandler:"theme.next",default:{key:""}},{property:"hotkey_bindings.previousTheme",title:"Previous Theme",keyHandler:"theme.previous",default:{key:""}},{property:"hotkey_bindings.switchTheme",title:"Select Theme",keyHandler:"theme._handleSwitch",default:[],displayMethod:"theme.themeKeybindsTemplate",parse:"theme._parseSwitch",format:null}]}]},function(e,t,a){e.exports=[{property:"savedThemes",title:"Saved Themes",actions:[{title:"Restore Defaults",handler:"theme._restoreDefaults"},{title:"Save Current",handler:"theme._showSaveOptions"}],displayGroup:"Theme",displayMethod:"theme.savedThemesTemplate",mix:!0,default:a(13)},{property:"savedThemesOrder",default:[]},{property:"selectedTheme",default:"Default"},{property:"headerTemplate",title:"Header",actions:[{title:"Reset",handler:"settings.reset"}],default:"repeat-button shuffle-button hover-images-button playlist-button\nsound-title-marquee\nview-menu-button add-button reload-button close-button",displayGroup:"Theme",displayMethod:"textarea",themeField:!0},{property:"rowTemplate",title:"Row",actions:[{title:"Reset",handler:"settings.reset"}],default:"sound-title h:{menu-button}",displayGroup:"Theme",displayMethod:"textarea",themeField:!0},{property:"footerTemplate",title:"Footer",actions:[{title:"Reset",handler:"settings.reset"}],default:`playing-button:"sound-index /&nbsp;" sound-count sounds\n<div class="fcsp-col"></div>\np:{\n\t\tpost-link\n\t\tOpen [ image-link sound-link ]\n\t\tDownload [ dl-image-button dl-sound-button ]\n}\n<div class="${ns}-expander" data-direction="se"></div>\n`,displayGroup:"Theme",displayMethod:"textarea",attrs:'style="height:9em;"',themeField:!0},{property:"chanXTemplate",title:"4chan X Header",default:'p:{\n\tpost-link:"sound-title"\n\tprev-button\n\tplay-button\n\tnext-button\n\tsound-current-time / sound-duration\n}',actions:[{title:"Reset",handler:"settings.reset"}],displayGroup:"Theme",displayMethod:"textarea",attrs:'style="height:9em;"',themeField:!0},{property:"customCSS",title:"Custom CSS",default:"",displayGroup:"Theme",displayMethod:"textarea",attrs:'style="height:9em"',themeField:!0}]},function(e,t){e.exports={"Fixed Playlist":{chanXControls:"always",headerTemplate:'<div class="playlist-resizer fcsp-expander" data-direction="w" data-bypass-save="true" data-bypass-position="true" data-allow-offscreen="true"></div>\nrepeat-button shuffle-button hover-images-button playlist-button\nsound-title-marquee\nview-menu-button add-button reload-button close-button',rowTemplate:'sound-title\np:{<img class="fcsp-row-image" src="sound-imageOrThumb">}\n<img class="fcsp-row-thumb" src="sound-thumb">',customCSS:'/* Fix the player to the right at full height (minus the 4chan X header) */\n#fcsp-container[data-view-style="playlist"] {\n\t/* Fixed width *\\/\n\twidth: 25rem !important;/**/\n\theight: auto !important;\n\ttop: $config[offsetTop] !important;\n\tright: 0px !important;\n\tbottom: $config[offsetBottom] !important;\n\tleft: auto !important;\n\theight: auto !important;\n\tmax-height: calc(100% - 24px);\n\tbackground: none !important;\n\tborder: none !important;\n}\n\n/* Hide things when the playlist is open */\n/* Hide the image with the playlist open, unless it\'s a webm.\n * To show gifs as well change playing-video to playing-animated. */\n#fcsp-container[data-view-style="playlist"]:not(.playing-video) .fcsp-image-link,/**/ \n#fcsp-container[data-view-style="playlist"] .fcsp-controls,\n#fcsp-container[data-view-style="playlist"] .fcsp-hover-image,\n#fcsp-container[data-view-style="playlist"] .fcsp-footer,\n#fcsp-container[data-view-style="fullscreen"] .fcsp-row-thumb,\n#fcsp-container[data-view-style="fullscreen"] .fcsp-row-image {\n\tdisplay: none !important;\n}\n/* Header is shown with adjustments to handle the changed container style */\n/* Opacity and absolute position are used to auto hide the header */\n#fcsp-container[data-view-style="playlist"] .fcsp-header {\n\tposition: absolute !important;\n\topacity: 0;\n\tz-index: 9;\n\tcursor: inherit;\n\tbackground: $config[colors.background];\n\tborder-width: 0 1px 1px 0;\n\ttransition: all .3s ease;\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-header:hover {\n\topacity: 1;\n}\n\n/* Don\'t show a scrollbar for the playlist for aesthetic reasons */\n#fcsp-container[data-view-style="playlist"] .fcsp-list-container {\n\tscrollbar-width: none;\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-list-container::-webkit-scrollbar {\n\tdisplay: none;\n}\n\n/* Chunky playlist items, with no background and a squared thumbnail image. */\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item {\n\tbackground: none !important;\n\theight: auto !important;\n\ttext-align: right;\n\talign-items: center;\n\ttransition: all .5s ease;\n\tfont-size: 1rem;\n\tcolor: $config[colors.text];\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-row-thumb, #fcsp-container[data-view-style="playlist"] .fcsp-row-image {\n\theight: 3rem;\n\twidth: 3rem;\n\tobject-fit: cover;\n\ttransition: all .5s ease;\n}\n/* Show a gradient background and increase the size of list items when you hover over them. */\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item:hover {\n\tline-height: calc(1.5rem + 4px);\n\tfont-size: 1.5rem;\n\tfont-weight: bold;\n\tbackground-image: radial-gradient(circle at -50%, #0000 70%, $config[colors.odd_row]) !important;\n\tcolor: $config[colors.background];\n\t-webkit-text-stroke: 1px black;\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item:hover .fcsp-row-thumb {\n\theight: 4rem;\n\twidth: 4rem;\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-row-image {\n\theight: 7rem;\n\twidth: 7rem;\n}\n/* Add a gradient background to the playing item, make the text bigger, and style the text. */\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item.playing {\n\tbackground-image: radial-gradient(circle at -50%, #0000 70%, $config[colors.playing]) !important;\n\tpadding-left: 2px;\n\tfont-weight: bold;\n\tfont-size: 1.5rem;\n\tcolor: $config[colors.page_background];\n\t-webkit-text-stroke: 1px black;\n\ttext-shadow: 0 0 2px $config[colors.border];\n}\n/* Swap the thumb image with the full image for the playing item. */\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item:not(.playing) .fcsp-row-image {\n\tdisplay: none;\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item.playing .fcsp-row-thumb {\n\tdisplay: none;\n}\n/* Same gradient background style for dragging items. */\n#fcsp-container[data-view-style="playlist"] .fcsp-dragging {\n\tbackground-image: radial-gradient(circle at -50%, #0000 70%, $config[colors.dragging]) !important\n}\n\n/* Add a resizer to the left of the header when the playlist is open. */\n.playlist-resizer {\n\topacity: 1 !important;\n\tmargin: 0 !important;\n\twidth: .25rem !important;\n\theight: auto !important;\n\tbackground-color: $config[colors.border] !important;\n\tposition: absolute;\n\tleft: -.25rem !important;\n\ttop: 0 !important;\n\tbottom: 0 !important;\n\tborder-radius: 100% 0 0 100%;\n\tcursor: ew-resize !important;\n\tdisplay: none;\n\ttransition: all .5s ease;\n}\n.playlist-resizer:hover {\n\twidth: .4rem !important;\n\tleft: -.4rem !important;\n}\n#fcsp-container[data-view-style="playlist"] .playlist-resizer {\n\tdisplay: block;\n}\n/* Hide the default resizers */\n#fcsp-container[data-view-style="playlist"] .fcsp-expander:not(.playlist-resizer) {\n\tdisplay: none;\n}\n'}}},function(e,t){e.exports=[{property:"defaultUploadHost",default:"catbox",parse:"settings.hosts.setDefault"},{property:"uploadHosts",title:"Hosts",actions:[{title:"Add",handler:"settings.hosts.add"},{title:"Restore Defaults",handler:"settings.hosts.restoreDefaults"}],displayGroup:"Hosts",displayMethod:()=>`<div class="${ns}-host-inputs">${Object.entries(Player.config.uploadHosts).map(Player.settings.hosts.template).join("")}</div>`,parse:"settings.hosts.parse",looseCompare:!0,dismissTextId:"uplodHostSettings",dismissRestoreText:"Show Help",text:"Properties<br><strong>Name</strong>: A unique identifier.<br><strong>URL</strong>: The URL to post the file to.<br><strong>Response Path/Match</strong>: A key path or regular expression to locate the uploaded filename in the response.<br><strong>File URL Format</strong>: The URL format for uploaded sounds. %s is replaced with the result of response path/match if given or the full response.<br><strong>Data</strong>: The form data for the upload (as JSON). Specify the file using $file.",mix:!0,default:{catbox:{default:!0,url:"https://catbox.moe/user/api.php",data:{reqtype:"fileupload",fileToUpload:"$file",userhash:null},filenameLength:29},pomf:{url:"https://pomf.cat/upload.php",data:{"files[]":"$file"},responsePath:"files.0.url",filenameLength:23},zz:{url:"https://zz.ht/api/upload",responsePath:"files.0.url",data:{"files[]":"$file"},headers:{token:null},filenameLength:19},lewd:{url:"https://lewd.se/upload",data:{file:"$file"},headers:{token:null,shortUrl:!0},responsePath:"data.link",filenameLength:30}}}]},function(e,t){e.exports=[{version:"3.0.0",name:"hosts-filename-length",async run(){const e=Player.settings.findDefault("uploadHosts").default;return Object.keys(e).forEach(t=>{Player.config.uploadHosts[t].filenameLength=e[t].filenameLength}),{}}},{version:"3.3.0",name:"sound-name-title-swap",async run(){const e=Player.config,t={};return["headerTemplate","rowTemplate","footerTemplate","chanXTemplate","customCSS"].forEach(a=>{/sound-name/.test(e[a])&&(t[a]=[e[a],e[a]=e[a].replace(/sound-name/g,"sound-title")])}),t}}]},function(e,t,a){(function(t){const n=a(17);e.exports={template:n,parse:function(e,t,a){t={...t};const n=a.eventTarget.closest(`.${ns}-host-input`);let s=n.getAttribute("data-host-name"),l=t[s]={...t[s]};const o=a.eventTarget.getAttribute("name");try{if("name"===o&&e!==s){if(!e||t[e])throw new PlayerError("A unique name for the host is required.","warning");n.setAttribute("data-host-name",e),t[e]=l,delete t[s],s=e}if("url"===o||"soundUrl"===o)try{("url"===o||e)&&new URL(e)}catch(e){throw new PlayerError("The value must be a valid URL.","warning")}if("data"===o)try{e=JSON.parse(e)}catch(e){throw new PlayerError("The data must be valid JSON.","warning")}if("headers"===o)try{e=e?JSON.parse(e):void 0}catch(e){throw new PlayerError("The headers must be valid JSON.","warning")}}catch(e){throw l.invalid=!0,n.classList.add("invalid"),e}void 0===e?delete l[o]:l[o]=e;try{const e=n.querySelector("[name=soundUrl]").value,t=n.querySelector("[name=headers]").value;!(s&&JSON.parse(n.querySelector("[name=data]").value)&&new URL(n.querySelector("[name=url]").value))||e&&!new URL(e)||t&&!JSON.parse(t)||(delete l.invalid,n.classList.remove("invalid"))}catch(e){}return t},add:function(){const e=Player.config.uploadHosts,a=Player.$(`.${ns}-host-inputs`);let s="New Host",l=1;for(;Player.config.uploadHosts[s];)s=s+" "+ ++l;e[s]={invalid:!0,data:{file:"$file"}},a.children[0]?t.elementBefore(n([s,e[s]]),a.children[0]):t.element(n([s,e[s]]),a),Player.settings.set("uploadHosts",e,{bypassValidation:!0,bypassRender:!0,silent:!0})},remove:function(e,t){const a=Player.config.uploadHosts,n=t.eventTarget.closest(`.${ns}-host-input`),s=n.getAttribute("data-host-name");Player.settings.findDefault("uploadHosts").default[s]?a[s]=null:delete a[s],n.parentNode.removeChild(n),Player.settings.set("uploadHosts",a,{bypassValidation:!0,bypassRender:!0})},setDefault:function(e,t,a){const n=a.eventTarget.closest(`.${ns}-host-input`).getAttribute("data-host-name");return n===Player.config.defaultUploadHost||Object.keys(Player.config.uploadHosts).forEach(e=>{const t=Player.$(`.${ns}-host-input[data-host-name="${e}"] input[data-property="defaultUploadHost"]`);t&&(t.checked=e===n)}),n},restoreDefaults:function(){Object.assign(Player.config.uploadHosts,Player.settings.findDefault("uploadHosts").default),Player.set("uploadHosts",Player.config.uploadHosts,{bypassValidation:!0})}}}).call(this,a(0))},function(e,t){e.exports=(e={})=>e[1]?`<div class="${ns}-row ${ns}-col ${ns}-host-input ${e[1].invalid?"invalid":""}" data-host-name="${e[0]}">\n\t<div class="${ns}-row ${ns}-host-controls">\n\t\t<div class="${ns}-col-auto">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" data-property="defaultUploadHost" ${Player.config.defaultUploadHost===e?"checked":""}>\n\t\t\t\tDefault\n\t\t\t</label>\n\t\t</div>\n\t\t<div class="${ns}-col-auto"><a href="#" class="${ns}-heading-action ${ns}-remove-host" data-handler="settings.hosts.remove" data-property="uploadHosts">Remove</a></div>\n\t</div>\n\t<div class="${ns}-row">\n\t\t<div class="${ns}-col"><input type="text" data-property="uploadHosts" name="name" value="${e[0]||""}" placeholder="Name"></div>\n\t\t<div class="${ns}-col"><input type="text" data-property="uploadHosts" name="url" value="${e[1].url||""}" placeholder="URL"></div>\n\t\t<div class="${ns}-col"><input type="text" data-property="uploadHosts" name="responsePath" value="${e[1].responsePath||""}" placeholder="Response Path"></div>\n\t\t<div class="${ns}-col"><input type="text" data-property="uploadHosts" name="responseMatch" value="${e[1].responseMatch||""}" placeholder="Response Match"></div>\n\t\t<div class="${ns}-col"><input type="text" data-property="uploadHosts" name="soundUrl" value="${e[1].soundUrl||""}" placeholder="File URL Format"></div>\n\t</div>\n\t<div class="${ns}-row">\n\t\t<div class="${ns}-col"><textarea data-property="uploadHosts" name="data" placeholder="Data (JSON)">${JSON.stringify(e[1].data,null,4)}</textarea></div>\n\t</div>\n\t<div class="${ns}-row">\n\t\t<div class="${ns}-col"><textarea data-property="uploadHosts" name="headers" placeholder="Headers (JSON)">${e[1].headers?JSON.stringify(e[1].headers,null,4):""}</textarea></div>\n\t</div>\n</div>`:""},function(e,t,a){(function(t,n){e.exports=(e={})=>{const s=a(3).reduce((e,t)=>(t.displayGroup&&(e[t.displayGroup]||(e[t.displayGroup]=[]),e[t.displayGroup].push(t)),e),{});let l=`<div class="${ns}-settings-tabs ${ns}-row">\n\t\t<div class="${ns}-settings-tab-group ${ns}-col-auto">\n\t\t\t<a href="#" class="${ns}-settings-reset-all ${ns}-settings-tab" title="Reset all settings to their default values." title="Reset all to default.">${t.reboot}</a>\n\t\t\t<a href="#" class="${ns}-settings-export ${ns}-settings-tab" title="Export. Shift click to export all settings. Otherwise only modified settings are included in the export.">${t.boxArrowRight}</a>\n\t\t\t<a href="#" class="${ns}-settings-import ${ns}-settings-tab" title="Import. Settings not included in the import will be left as their current value.">${t.boxArrowInLeft}</a>\n\t\t\t<a href="${Player.settings.changelog}" class="${ns}-settings-tab" target="_blank" title="v3.3.1-6627bac">${t.github}</a>\n\t\t</div>\n\t\t<div class="${ns}-settings-tab-group ${ns}-col-auto">\n\t\t\t${Object.keys(s).map(e=>`<a href="javascript:;" class="${ns}-settings-tab ${Player.settings.view!==e?"":"active"}" data-group="${e}">${e}</a>`).join(" | ")}\n\t\t</div>\n\t</div>`;return Object.keys(s).forEach(e=>{l+=`<div class="${ns}-settings-group ${Player.settings.view!==e?"":"active"}" data-group="${e}">`,s[e].forEach((function e(a){if(null!==a.displayMethod){if(l+=`\n\t\t\t<div class="${ns}-row ${ns}-align-${a.isSubSetting?"start":"center"} ${a.isSubSetting?ns+"-sub-settings":""}">\n\t\t\t\t<div class="${ns}-col ${a.isSubSetting?ns+"-space-between":ns+"-heading"}">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t${a.title}\n\t\t\t\t\t\t${a.description?`<i class="${ns}-info-circle ${ns}-popover" data-content="${a.description}">${t.infoCircle}</i>`:""}\n\t\t\t\t\t</span>\n\t\t\t\t\t${a.actions&&a.actions.length?`<div style="display: inline-block; margin: 0 .25rem">\n\t\t\t\t\t\t${(a.actions||[]).map(e=>`<a href="#" class="${ns}-heading-action" data-handler="${e.handler}" data-property="${a.property}">${e.title}</a>`).join(" ")}\n\t\t\t\t\t</div>`:""}\n\t\t\t\t</div>`,a.text&&(l+=a.dismissTextId?`<div class="${ns}-col" style="min-width: 100%">`+Player.display.ifNotDismissed(a.dismissTextId,a.dismissRestoreText,`<div data-dismiss-id="${a.dismissTextId}">`+a.text+`<a href="javascript:;" class="${ns}-dismiss-link" data-dismiss="${a.dismissTextId}" style="display:block; margin-top:.25rem">Dismiss</a></div>`)+"</div>":a.text),a.settings)a.settings.forEach(t=>e({...a,actions:null,settings:null,description:null,...t,isSubSetting:!0}));else{let e=n.get(Player.config,a.property,a.default),t=(a.attrs||"")+(a.class?` class="${a.class}"`:"")+` data-property="${a.property}"`,s=a.displayMethod,o="function"==typeof s?s:n.get(Player,s);a.format&&(e=Player.getHandler(a.format)(e));let r=typeof e;a.split?e=e.join(a.split):"object"===r&&(e=JSON.stringify(e,null,4)),l+="function"==typeof o?o(e,t):"boolean"===r?`<div class="${ns}-col"><input type="checkbox" ${t} ${e?"checked":""}></div>`:"textarea"===s||"object"===r?`<div class="${ns}-row ${ns}-col"><textarea ${t}>${e}</textarea></div>`:a.options?`<div class="${ns}-col">\n\t\t\t\t\t\t\t\t<select ${t}>\n\t\t\t\t\t\t\t\t\t${Object.keys(a.options).map(t=>`<option value="${t}" ${e===t?"selected":""}>\n\t\t\t\t\t\t\t\t\t\t${a.options[t]}\n\t\t\t\t\t\t\t\t\t</option>`).join("")}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>`:`<div class="${ns}-col"><input type="text" ${t} value="${e}"></div>`}l+="</div>"}})),l+="</div>"}),l}}).call(this,a(1),a(0))},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>\n  <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-collapse" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707l-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-expand" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">\n  <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>\n  <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>\n  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>\n  <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-right-quote" viewBox="0 0 16 16">\n  <path d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"/>\n  <path d="M7.066 4.76A1.665 1.665 0 0 0 4 5.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 1 0 .6.58c1.486-1.54 1.293-3.214.682-4.112zm4 0A1.665 1.665 0 0 0 8 5.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 1 0 .6.58c1.486-1.54 1.293-3.214.682-4.112z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-up" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">\n  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">\n  <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>\n  <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-image" viewBox="0 0 16 16">\n  <path d="M6.502 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>\n  <path d="M14 14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5V14zM4 1a1 1 0 0 0-1 1v10l2.224-2.224a.5.5 0 0 1 .61-.075L8 11l2.157-3.02a.5.5 0 0 1 .76-.063L13 10V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-music" viewBox="0 0 16 16">\n  <path d="M11 6.64a1 1 0 0 0-1.243-.97l-1 .25A1 1 0 0 0 8 6.89v4.306A2.572 2.572 0 0 0 7 11c-.5 0-.974.134-1.338.377-.36.24-.662.628-.662 1.123s.301.883.662 1.123c.364.243.839.377 1.338.377.5 0 .974-.134 1.338-.377.36-.24.662-.628.662-1.123V8.89l2-.5V6.64z"/>\n  <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-filter" viewBox="0 0 16 16">\n  <path d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-fullscreen" viewBox="0 0 16 16">\n  <path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-fullscreen-exit" viewBox="0 0 16 16">\n  <path d="M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zm5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5zM0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zm10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">\n  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-image" viewBox="0 0 16 16">\n  <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>\n  <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">\n  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n  <path d="M8.93 6.588l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">\n  <path d="M4.715 6.542L3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.001 1.001 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/>\n  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 0 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 0 0-4.243-4.243L6.586 4.672z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-music-note-list" viewBox="0 0 16 16">\n  <path d="M12 13c0 1.105-1.12 2-2.5 2S7 14.105 7 13s1.12-2 2.5-2 2.5.895 2.5 2z"/>\n  <path fill-rule="evenodd" d="M12 3v10h-1V3h1z"/>\n  <path d="M11 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 16 2.22V4l-5 1V2.82z"/>\n  <path fill-rule="evenodd" d="M0 11.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 .5 7H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 .5 3H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play" viewBox="0 0 16 16">\n  <path d="M10.804 8L5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">\n  <path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause" viewBox="0 0 16 16">\n  <path d="M6 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zm4 0a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">\n  <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">\n  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bootstrap-reboot" viewBox="0 0 16 16">\n  <path d="M1.161 8a6.84 6.84 0 1 0 6.842-6.84.58.58 0 0 1 0-1.16 8 8 0 1 1-6.556 3.412l-.663-.577a.58.58 0 0 1 .227-.997l2.52-.69a.58.58 0 0 1 .728.633l-.332 2.592a.58.58 0 0 1-.956.364l-.643-.56A6.812 6.812 0 0 0 1.16 8z"/>\n  <path d="M6.641 11.671V8.843h1.57l1.498 2.828h1.314L9.377 8.665c.897-.3 1.427-1.106 1.427-2.1 0-1.37-.943-2.246-2.456-2.246H5.5v7.352h1.141zm0-3.75V5.277h1.57c.881 0 1.416.499 1.416 1.32 0 .84-.504 1.324-1.386 1.324h-1.6z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">\n  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shuffle" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.624 9.624 0 0 0 7.556 8a9.624 9.624 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5z"/>\n  <path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192zm0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-end" viewBox="0 0 16 16">\n  <path d="M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.713 3.31 4 3.655 4 4.308v7.384c0 .653.713.998 1.233.696L11.5 8.752V12a.5.5 0 0 0 1 0V4zM5 4.633L10.804 8 5 11.367V4.633z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-end-fill" viewBox="0 0 16 16">\n  <path d="M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.693 3.3 4 3.678 4 4.308v7.384c0 .63.692 1.01 1.233.697L11.5 8.753V12a.5.5 0 0 0 1 0V4z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-start" viewBox="0 0 16 16">\n  <path d="M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.52-.302 1.233.043 1.233.696v7.384c0 .653-.713.998-1.233.696L5 8.752V12a.5.5 0 0 1-1 0V4zm7.5.633L5.696 8l5.804 3.367V4.633z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-start-fill" viewBox="0 0 16 16">\n  <path d="M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.54-.313 1.232.066 1.232.696v7.384c0 .63-.692 1.01-1.232.697L5 8.753V12a.5.5 0 0 1-1 0V4z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-soundwave" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8.5 2a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5zm-2 2a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zm4 0a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zm-6 1.5A.5.5 0 0 1 5 6v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm8 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm-10 1A.5.5 0 0 1 3 7v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5zm12 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-tools" viewBox="0 0 16 16">\n  <path d="M1 0L0 1l2.2 3.081a1 1 0 0 0 .815.419h.07a1 1 0 0 1 .708.293l2.675 2.675-2.617 2.654A3.003 3.003 0 0 0 0 13a3 3 0 1 0 5.878-.851l2.654-2.617.968.968-.305.914a1 1 0 0 0 .242 1.023l3.356 3.356a1 1 0 0 0 1.414 0l1.586-1.586a1 1 0 0 0 0-1.414l-3.356-3.356a1 1 0 0 0-1.023-.242L10.5 9.5l-.96-.96 2.68-2.643A3.005 3.005 0 0 0 16 3c0-.269-.035-.53-.102-.777l-2.14 2.141L12 4l-.364-1.757L13.777.102a3 3 0 0 0-3.675 3.68L7.462 6.46 4.793 3.793a1 1 0 0 1-.293-.707v-.071a1 1 0 0 0-.419-.814L1 0zm9.646 10.646a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708zM3 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026L3 11z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">\n  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>\n  <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-mute" viewBox="0 0 16 16">\n  <path d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zM6 5.04L4.312 6.39A.5.5 0 0 1 4 6.5H2v3h2a.5.5 0 0 1 .312.11L6 10.96V5.04zm7.854.606a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-mute-fill" viewBox="0 0 16 16">\n  <path d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zm7.137 2.096a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-up" viewBox="0 0 16 16">\n  <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"/>\n  <path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"/>\n  <path d="M10.025 8a4.486 4.486 0 0 1-1.318 3.182L8 10.475A3.489 3.489 0 0 0 9.025 8c0-.966-.392-1.841-1.025-2.475l.707-.707A4.486 4.486 0 0 1 10.025 8zM7 4a.5.5 0 0 0-.812-.39L3.825 5.5H1.5A.5.5 0 0 0 1 6v4a.5.5 0 0 0 .5.5h2.325l2.363 1.89A.5.5 0 0 0 7 12V4zM4.312 6.39L6 5.04v5.92L4.312 9.61A.5.5 0 0 0 4 9.5H2v-3h2a.5.5 0 0 0 .312-.11z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-up-fill" viewBox="0 0 16 16">\n  <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"/>\n  <path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"/>\n  <path d="M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707zM6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06z"/>\n</svg>'},function(e,t){e.exports={atRoot:["on","off","trigger"],_events:{},_delegatedEvents:{},_undelegatedEvents:{},_audioEvents:[],initialize:function(){const e={Player:Player,...Player.components},t=Player.events._delegatedEvents,a=Player.events._undelegatedEvents,n=Player.events._audioEvents;for(let s in e){const l=e[s];for(let e in l.delegatedEvents||{})t[e]||(t[e]=[]),t[e].push(l.delegatedEvents[e]);for(let e in l.undelegatedEvents||{})a[e]||(a[e]=[]),a[e].push(l.undelegatedEvents[e]);l.audioEvents&&n.push(l.audioEvents)}Player.on("rendered",(function(){Player.events.addDelegatedListeners(Player.container,t),Player.events.addUndelegatedListeners(document,a);for(let e of n)for(let t in e){(Array.isArray(e[t])?e[t]:[e[t]]).forEach(e=>Player.audio.addEventListener(t,Player.getHandler(e)))}}))},addDelegatedListeners(e,t){for(let a in t)e.addEventListener(a,(function(n){let s=[n.target];for(;s[s.length-1]!==e;)s.push(s[s.length-1].parentNode);for(let e of s)for(let s of[].concat(t[a]))for(let t in s)if(e.matches&&e.matches(t)){n.eventTarget=e;let a=Player.getHandler(s[t]);if(a&&!1===a(n))return}}))},addUndelegatedListeners:function(e,t){for(let a in t)for(let n of[].concat(t[a]))for(let t in n)e.querySelectorAll(t).forEach(e=>{const s=Player.getHandler(n[t]);e.removeEventListener(a,s),e.addEventListener(a,s)})},on:function(e,t){Player.events._events[e]||(Player.events._events[e]=[]),Player.events._events[e].push(t)},off:function(e,t){const a=Player.events._events[e]&&Player.events._events[e].indexOf(t);a>-1&&Player.events._events[e].splice(a,1)},trigger:async function(e,...t){const a=Player.events._events[e]||[];for(let e of a)await e(...t)}}},function(e,t){e.exports={atRoot:["togglePlay","play","pause","next","previous","stop","toggleMute","volumeUp","volumeDown"],public:["togglePlay","play","pause","next","previous","stop","toggleMute","volumeUp","volumeDown"],togglePlay:function(){Player.audio.paused?Player.play():Player.pause()},play:async function(e,{paused:t}={}){try{e||Player.playing||!Player.sounds.length||(e=Player.sounds[0]);const a=document.querySelector(`.${ns}-video`);if(a.removeEventListener("canplaythrough",Player.actions._playOnceLoaded),Player.audio.removeEventListener("canplaythrough",Player.actions._playOnceLoaded),e){Player.playing&&(Player.playing.playing=!1);const t=Player.controls.audioEvents;for(let n in t){(Array.isArray(t[n])?t[n]:[t[n]]).forEach(t=>{const s=Player.getHandler(t);a.removeEventListener(n,s),e.standaloneVideo&&a.addEventListener(n,s)})}e.playing=!0,Player.playing=e,Player.audio.src=e.src,Player.isVideo=e.image.endsWith(".webm")||"video/webm"===e.type,Player.isStandalone=e.standaloneVideo,Player.audio=e.standaloneVideo?a:Player.controls._audio,Player.container.classList[Player.isVideo?"add":"remove"]("playing-video"),Player.container.classList[Player.isVideo||e.image.endsWith("gif")?"add":"remove"]("playing-animated"),await Player.trigger("playsound",e)}t||(!Player.isStandalone&&Player.isVideo&&(a.readyState<3||Player.audio.readyState<3)?(a.addEventListener("canplaythrough",Player.actions._playOnceLoaded),Player.audio.addEventListener("canplaythrough",Player.actions._playOnceLoaded)):Player.audio.play())}catch(e){Player.logError("There was an error playing the sound. Please check the console for details.",e)}},_playOnceLoaded:function(){const e=document.querySelector(`.${ns}-video`);e.readyState>2&&Player.audio.readyState>2&&(e.removeEventListener("canplaythrough",Player.actions._playOnceLoaded),Player.audio.removeEventListener("canplaythrough",Player.actions._playOnceLoaded),Player.audio.play(),setTimeout(Player.controls.syncVideo,100))},pause:function(){Player.audio&&Player.audio.pause()},stop:function(){Player.audio.src=null,Player.playing=null,Player.trigger("stop")},next:function(e){Player.actions._movePlaying(1,e)},previous:function(e){Player.audio.currentTime>3?Player.audio.currentTime=0:Player.actions._movePlaying(-1,e)},_movePlaying:function(e,{force:t,group:a,paused:n}={}){if(!Player.sounds.length)return;const s=Player.sounds.indexOf(Player.playing);if(-1===s)return Player.play(Player.sounds[0]);let l;if(t||"one"!==Player.config.repeat){let t=s;do{t="all"===Player.config.repeat?(t+e+Player.sounds.length)%Player.sounds.length:t+e,l=Player.sounds[t]}while(a&&l&&t!==s&&(!l.post||l.post===Player.playing.post))}else l=Player.sounds[s];l&&Player.play(l,{paused:n})},volumeUp:function(){Player.audio.volume=Math.min(Player.audio.volume+.05,1)},volumeDown:function(){Player.audio.volume=Math.max(Player.audio.volume-.05,0)},toggleMute:function(){Player.audio.volume=(Player._lastVolume||.5)*!Player.audio.volume}}},function(e,t,a){(function(t){const n=a(66);e.exports={delegatedEvents:{click:{[`.${ns}-colorpicker-input, .${ns}-cp-preview`]:"colorpicker.create",[`.${ns}-apply-colorpicker`]:"colorpicker._applyColorPicker",[`.${ns}-close-colorpicker`]:t.noDefault(()=>Player.display.closeDialogs())},change:{[`.${ns}-rgb-input`]:"colorpicker._handleRGBInput"},focusout:{[`.${ns}-colorpicker-input`]:"colorpicker._updatePreview"},mousedown:{[`.${ns}-cp-saturation, .${ns}-cp-hue`]:e=>{const t=e.eventTarget;t._mousedown=!0,document.documentElement.addEventListener("mouseup",e=>delete t._mousedown,{once:!0}),Player.colorpicker[`_handle${e.eventTarget.classList.contains(ns+"-cp-hue")?"Hue":"Saturation"}Move`](e)}},mousemove:{[`.${ns}-cp-hue`]:"colorpicker._handleHueMove",[`.${ns}-cp-saturation`]:"colorpicker._handleSaturationMove"}},initialize:function(){Player.on("menu-close",e=>e._input&&delete e._input._colorpicker)},create:function(e){e.preventDefault(),e.stopPropagation();const a=e.eventTarget.parentNode,s="INPUT"===e.eventTarget.nodeName?e.eventTarget:a.querySelector("input"),l=a.querySelector(`.${ns}-cp-preview`);if(!s||s._colorpicker)return;Player.display.closeDialogs();const o=window.getComputedStyle(l).backgroundColor.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/),r=[+o[1],+o[2],+o[3],isNaN(+o[4])?1:o[4]],i=t.element(n({HEIGHT:200,WIDTH:200,rgb:r}),a);Player.position.showRelativeTo(i,s),s._colorpicker=i,i._input=s,i._colorpicker={hsv:[0,1,1,1],rgb:r},Player.colorpicker.updateOutput(i)},_handleHueMove:function(e){if(!e.eventTarget._mousedown)return;e.preventDefault();const t=e.eventTarget.closest(`.${ns}-colorpicker`),a=Math.max(0,e.clientY-e.eventTarget.getBoundingClientRect().top);t._colorpicker.hsv[0]=a/200;const n=Player.colorpicker.hsv2rgb(t._colorpicker.hsv[0],1,1,1);t.querySelector(`.${ns}-cp-saturation`).style.background=`linear-gradient(to right, white, rgb(${n[0]}, ${n[1]}, ${n[2]}))`,e.eventTarget.querySelector(".position").style.top=Math.max(-3,a-6)+"px",Player.colorpicker.updateOutput(t,!0)},_handleSaturationMove:function(e){if(!e.eventTarget._mousedown)return;e.preventDefault();const t=e.eventTarget.closest(`.${ns}-colorpicker`),a=e.eventTarget.querySelector(".position"),n=Math.max(0,e.clientX-e.eventTarget.getBoundingClientRect().left),s=Math.max(0,e.clientY-e.eventTarget.getBoundingClientRect().top);t._colorpicker.hsv[1]=n/200,t._colorpicker.hsv[2]=1-s/200,a.style.top=Math.min(197,Math.max(-3,s-6))+"px",a.style.left=Math.min(197,Math.max(-3,n-5))+"px",Player.colorpicker.updateOutput(t,!0)},_handleRGBInput:function(e){const t=e.eventTarget.closest(`.${ns}-colorpicker`);t._colorpicker.rgb[+e.eventTarget.getAttribute("data-color")]=e.eventTarget.value,Player.colorpicker.updateOutput(t)},updateOutput:function(e,t){const a=t?["hsv","rgb"]:["rgb","hsv"];e._colorpicker[a[1]]=Player.colorpicker[`${a[0]}2${a[1]}`](...e._colorpicker[a[0]]);const[n,s,l,o]=e._colorpicker.rgb;if(t)e.querySelector(`.${ns}-rgb-input[data-color="0"]`).value=n,e.querySelector(`.${ns}-rgb-input[data-color="1"]`).value=s,e.querySelector(`.${ns}-rgb-input[data-color="2"]`).value=l,e.querySelector(`.${ns}-rgb-input[data-color="3"]`).value=o;else{const[t,a,n]=e._colorpicker.hsv,s=e.querySelector(`.${ns}-cp-hue .position`),l=e.querySelector(`.${ns}-cp-saturation .position`),o=Player.colorpicker.hsv2rgb(t,1,1,1);e.querySelector(`.${ns}-cp-saturation`).style.background=`linear-gradient(to right, white, rgb(${o[0]}, ${o[1]}, ${o[2]}))`,s.style.top=200*t-3+"px",l.style.left=200*a-3+"px",l.style.top=200*(1-n)-3+"px"}e.querySelector(".output-color").style.background=`rgb(${n}, ${s}, ${l}, ${o})`},_applyColorPicker:function(e){e.preventDefault(),e.stopPropagation();const t=e.eventTarget.closest(`.${ns}-colorpicker`),[a,n,s,l]=t._colorpicker.rgb,o=t._input;o.value=`rgb(${a}, ${n}, ${s}, ${l})`,delete o._colorpicker,t.parentNode.removeChild(t),o.focus(),o.blur()},hsv2rgb:function(e,t,a,n){const s=Math.floor(6*e),l=6*e-s,o=a*(1-t),r=a*(1-l*t),i=a*(1-(1-l)*t),d=s%6,c=[a,r,o,o,i,a][d],u=[i,a,a,r,o,o][d],p=[o,o,i,a,a,r][d];return[Math.round(255*c),Math.round(255*u),Math.round(255*p),n]},rgb2hsv:function(e,t,a,n){const s=Math.max(e,t,a),l=Math.min(e,t,a),o=s-l,r=0===s?0:o/s,i=s/255;let d;switch(s){case l:d=0;break;case e:d=t-a+o*(t<a?6:0),d/=6*o;break;case t:d=a-e+2*o,d/=6*o;break;case a:d=e-t+4*o,d/=6*o}return[d,r,i,n]},_updatePreview:function(e){const t=e.eventTarget.value;e.eventTarget.parentNode.querySelector(`.${ns}-cp-preview`).style.background=t}}}).call(this,a(0))},function(e,t,a){(function(t){e.exports=(e={})=>`<div class="${ns}-colorpicker ${ns}-dialog dialog" data-allow-click="true" style="top: 0px; left: 0px;">\n\t<div class="${ns}-cp-saturation" style="height: ${e.HEIGHT}px; width: ${e.WIDTH}px;">\n\t\t<div class="position" style="left: ${e.WIDTH-3}px; top: -3px;"></div>\n\t</div>\n\t<div class="${ns}-cp-hue" style="height: ${e.HEIGHT}px">\n\t\t<div class="position"></div>\n\t</div>\n\t<div class="${ns}-output" style="text-align: right;">\n\t\t<a href="#" class="${ns}-close-colorpicker">${t.close}</a>\n\t\t<div class="output-color" style="background: rgb(${e.rgb[0]}, ${e.rgb[1]}, ${e.rgb[2]});"></div>\n\n\t\t<table>\n\t\t\t<tr><td>R:</td><td><input type="text" class="${ns}-rgb-input" data-color="0" value="${e.rgb[0]}"></td></tr>\n\t\t\t<tr><td>G:</td><td><input type="text" class="${ns}-rgb-input" data-color="1" value="${e.rgb[1]}"></td></tr>\n\t\t\t<tr><td>B:</td><td><input type="text" class="${ns}-rgb-input" data-color="2" value="${e.rgb[2]}"></td></tr>\n\t\t\t<tr><td>A:</td><td><input type="text" class="${ns}-rgb-input" data-color="3" value="${e.rgb[3]}"></td></tr>\n\t\t</table>\n\n\t\t<button class="${ns}-apply-colorpicker">Apply</button><br>\n\t</div>\n</div>`}).call(this,a(1))},function(e,t,a){(function(t){e.exports={template:a(68),delegatedEvents:{click:{[`.${ns}-previous-button`]:t.noDefault(()=>Player.previous({force:!0})),[`.${ns}-play-button`]:t.noDefault("togglePlay"),[`.${ns}-next-button`]:t.noDefault(()=>Player.next({force:!0})),[`.${ns}-seek-bar`]:"controls.handleSeek",[`.${ns}-volume-bar`]:"controls.handleVolume",[`.${ns}-volume-button`]:t.noDefault("toggleMute"),[`.${ns}-fullscreen-button`]:"display.toggleFullScreen"},mousedown:{[`.${ns}-seek-bar`]:()=>Player._seekBarDown=!0,[`.${ns}-volume-bar`]:()=>Player._volumeBarDown=!0},mousemove:{[`.${ns}-seek-bar`]:e=>Player._seekBarDown&&Player.controls.handleSeek(e),[`.${ns}-volume-bar`]:e=>Player._volumeBarDown&&Player.controls.handleVolume(e)}},undelegatedEvents:{mouseleave:{[`.${ns}-seek-bar`]:e=>Player._seekBarDown&&Player.controls.handleSeek(e),[`.${ns}-volume-bar`]:e=>Player._volumeBarDown&&Player.controls.handleVolume(e)},mouseup:{body:()=>{Player._seekBarDown=!1,Player._volumeBarDown=!1}},play:{[`.${ns}-video`]:"controls.syncVideo"},pause:{[`.${ns}-video`]:"controls.syncVideo"}},audioEvents:{ended:()=>Player.next(),pause:"controls.handleAudioEvent",play:"controls.handleAudioEvent",seeked:"controls.handleAudioEvent",waiting:"controls.handleAudioEvent",timeupdate:"controls.updateDuration",loadedmetadata:["controls.updateDuration","controls.preventWrapping"],durationchange:"controls.updateDuration",volumechange:"controls.updateVolume",loadstart:"controls.pollForLoading",error:"controls.handleAudioError"},initialize:async function(){Player.controls._audio=Player.audio,GM.getValue("volume").then(e=>e>=0&&e<=1&&(Player.audio.volume=e)),Player.on("show",()=>Player._hiddenWhilePolling&&Player.controls.pollForLoading()),Player.on("hide",()=>{Player._hiddenWhilePolling=!!Player._loadingPoll,Player.controls.stopPollingForLoading()}),Player.on("rendered",()=>{Player.ui.currentTimeBar=Player.$(`.${ns}-seek-bar .${ns}-current-bar`),Player.ui.loadedBar=Player.$(`.${ns}-seek-bar .${ns}-loaded-bar`),Player.controls.updateDuration(),Player.controls.updateVolume(),Player.controls.preventWrapping()}),Player.on("config:preventControlsWrapping",e=>!e&&Player.controls.showAllControls()),Player.on("config:controlsHideOrder",()=>{Player.controls.setHideOrder(),Player.controls.preventWrapping()})},handleAudioError:function(e){Player.playing&&(Player.logError(`Failed to play ${Player.playing.title}. Please check the console for details.`,e,"warning"),Player.next())},handleAudioEvent:function(){Player.controls.syncVideo(),Player.controls.updateDuration(),document.querySelectorAll(`.${ns}-play-button`).forEach(e=>{e.classList[Player.audio.paused?"add":"remove"](ns+"-play")})},syncVideo:function(){if(Player.isVideo&&!Player.isStandalone){const e=Player.audio.paused,t=document.querySelector(`.${ns}-video`);t&&(t.currentTime=Player.audio.currentTime%t.duration,e?t.pause():t.play())}},pollForLoading:function(){Player._loadingPoll=Player._loadingPoll||setInterval(Player.controls.updateLoaded,1e3)},stopPollingForLoading:function(){Player._loadingPoll&&clearInterval(Player._loadingPoll),Player._loadingPoll=null},updateLoaded:function(){const e=Player.audio.buffered.length,t=e>0?Player.audio.buffered.end(e-1)/Player.audio.duration*100:0;100===t&&Player.controls.stopPollingForLoading(),Player.ui.loadedBar.style.width=t+"%"},updateDuration:function(){const e=t.toDuration(Player.audio.currentTime),a=t.toDuration(Player.audio.duration);document.querySelectorAll(`.${ns}-current-time`).forEach(t=>t.childNodes[0].textContent=e),document.querySelectorAll(`.${ns}-duration`).forEach(e=>e.childNodes[0].textContent=a),Player.controls.updateProgressBarPosition(Player.ui.currentTimeBar,Player.audio.currentTime,Player.audio.duration)},updateVolume:function(){const e=Player.audio.volume;e>0&&(Player._lastVolume=e),GM.setValue("volume",e),document.querySelectorAll(`.${ns}-volume-button`).forEach(t=>{t.classList[0===e?"add":"remove"]("mute"),t.classList[e>0?"add":"remove"]("up")}),Player.controls.updateProgressBarPosition(Player.$(`.${ns}-volume-bar .${ns}-current-bar`),Player.audio.volume,1)},updateProgressBarPosition:function(e,t,a){if(!e)return;t||(t=0),a||(a=0);const n=a?Math.max(0,Math.min((t||0)/a,1)):0;e.style.width=`calc(${100*n}% - ${.8*n-.4}rem)`},handleSeek:function(e){e.preventDefault(),Player.audio.duration&&Player.audio.duration!==1/0&&(Player.audio.currentTime=Player.audio.duration*Player.controls._getBarXRatio(e))},handleVolume:function(e){e.preventDefault(),Player.audio.volume=Player.controls._getBarXRatio(e),Player.controls.updateVolume()},_getBarXRatio:function(e){const t=.4*Player.remSize;return Math.max(0,Math.min(1,(e.offsetX-t)/(parseInt(getComputedStyle(e.eventTarget||e.target).width,10)-2*t)))},showAllControls:function(){Player.$all(`.${ns}-controls [data-hide-id]`).forEach(e=>e.style.display=null)},preventWrapping:function(){if(!Player.config.preventControlWrapping)return;const e=Player.$(`.${ns}-controls`),t=parseFloat(window.getComputedStyle(e).paddingTop),a=Player.controls.hideOrder||Player.controls.setHideOrder();let n=Array.prototype.slice.call(e.children),s=n.pop(),l=0;for(Player.controls.showAllControls();s.offsetTop>t&&l<a.length;){const e=a[l++];e.style.display="none",n=n.filter(t=>t!==e),e===s&&(s=n.pop())}},setHideOrder:function(){Array.isArray(Player.config.controlsHideOrder)||Player.settings.reset("controlsHideOrder");const e=Player.$(`.${ns}-controls`);return Player.controls.hideOrder=Player.config.controlsHideOrder.map(t=>e.querySelector(`[data-hide-id="${t}"]`)).filter(e=>e).sort((e,t)=>e.dataset.hideOrder-t.dataset.hideOrder)}}}).call(this,a(0))},function(e,t,a){(function(t){e.exports=(e={})=>`<div class="${ns}-col-auto">\n\t<div class="${ns}-media-control ${ns}-previous-button ${ns}-hover-fill" data-hide-id="previous">\n\t\t${t.skipStart} ${t.skipStartFill}\n\t</div>\n\t<div class="${ns}-media-control ${ns}-play-button ${ns}-hover-fill ${!Player.audio||Player.audio.paused?ns+"-play":""}">\n\t\t${t.play} ${t.pause} ${t.playFill} ${t.pauseFill}\n\t</div>\n\t<div class="${ns}-media-control ${ns}-next-button ${ns}-hover-fill" data-hide-id="next">\n\t\t${t.skipEnd} ${t.skipEndFill}\n\t</div>\n</div>\n<div class="${ns}-col" data-hide-id="seek-bar">\n\t<div class="${ns}-seek-bar ${ns}-progress-bar">\n\t\t<div class="${ns}-full-bar">\n\t\t\t<div class="${ns}-loaded-bar"></div>\n\t\t\t<div class="${ns}-current-bar"></div>\n\t\t</div>\n\t</div>\n</div>\n<div class="${ns}-col-auto" data-hide-id="time">\n\t<span>\n\t\t<span class="${ns}-current-time">0:00</span>\n\t\t<span class="${ns}-text-muted" data-hide-id="duration"> / <span class="${ns}-duration">0:00</span></span>\n\t</span>\n</div>\n<div class="${ns}-col-auto" data-hide-id="mute">\n\t<div class="${ns}-media-control ${ns}-volume-button ${ns}-hover-fill up" data-hide-id="volume-button">\n\t\t${t.volumeMute} ${t.volumeMuteFill}\n\t\t${t.volumeUp} ${t.volumeUpFill}\n\t</div>\n\t<div class="${ns}-volume-bar ${ns}-progress-bar" data-hide-id="volume-bar">\n\t\t<div class="${ns}-full-bar">\n\t\t\t<div class="${ns}-current-bar" style="width: ${100*Player.audio.volume}%"></div>\n\t\t</div>\n\t</div>\n</div>\n<div class="${ns}-col-auto" data-hide-id="fullscreen">\n\t<div class="${ns}-media-control ${ns}-fullscreen-button">\n\t\t${t.fullscreen} ${t.fullscreenExit}\n\t</div>\n</div>`}).call(this,a(1))},function(e,t,a){(function(t){const n=a(70),s=a(71),l={},o={};e.exports={atRoot:["show","hide"],public:["show","hide"],template:a(72),delegatedEvents:{click:{[`.${ns}-close-button`]:"hide",[`.${ns}-dismiss-link`]:"display._handleDismiss",[`.${ns}-restore-link`]:"display._handleRestore"},fullscreenchange:{[`.${ns}-player`]:"display._handleFullScreenChange"},drop:{[`#${ns}-container`]:"display._handleDrop"}},undelegatedEvents:{click:{body:"display.closeDialogs"},keydown:{body:e=>"Escape"===e.key&&Player.display.closeDialogs(e)}},initialize:async function(){try{Player.display.dismissed=(await GM.getValue("dismissed")).split(",")}catch(e){Player.display.dismissed=[]}Player.on("playsound",()=>{Player.display._marquees={},!Player.display._marqueeTO&&Player.display.runTitleMarquee()}),Player.remSize=parseFloat(getComputedStyle(document.documentElement).fontSize)},createPlayerButton:function(){if("FoolFuuka"===Site){const e=document.querySelector(".navbar-inner .nav:nth-child(2)");t.element('<li><a href="javascript:;">Sounds</a></li>',e).children[0].addEventListener("click",Player.display.toggle)}else if("Fuuka"===Site){const e=document.querySelector("body > div > br");e.parentNode.insertBefore(document.createTextNode("["),e),t.elementBefore('<a href="javascript:;">Sounds</a>',e,{click:Player.display.toggle}),e.parentNode.insertBefore(document.createTextNode("]"),e)}else if(isChanX){t.elementBefore('<span id="shortcut-sounds" class="shortcut brackets-wrap" data-index="0">\n\t\t\t\t<a href="javascript:;" title="Sounds" class="fa fa-play-circle">Sounds</a>\n\t\t\t</span>',document.getElementById("shortcut-settings")).querySelector("a").addEventListener("click",Player.display.toggle)}else document.querySelectorAll("#settingsWindowLink, #settingsWindowLinkBot").forEach((function(e){t.elementBefore('<a href="javascript:;">Sounds</a>',e,{click:Player.display.toggle}),e.parentNode.insertBefore(document.createTextNode("] ["),e)}))},render:async function(){try{Player.container&&(document.body.removeChild(Player.container),document.head.removeChild(Player.stylesheet)),Player.display.updateStylesheet();const e=document.body.classList.contains("is_thread")&&!isChanX&&document.body.querySelector(".board")||document.body;Player.container=t.element(Player.display.template(),e),Player.display.initPopovers(Player.container),Player.trigger("rendered")}catch(e){throw Player.logError("There was an error rendering the sound player.",e),e}},updateStylesheet:function(){Player.stylesheet=Player.stylesheet||t.element('<style id="sound-player-css"></style>',document.head),Player.stylesheet.innerHTML=(isChanX?"":"/* 4chanX Polyfill */\n\n"+s())+"\n\n/* Sounds Player CSS */\n\n"+n()},setViewStyle:async function(e){const t=Player.config.viewStyle;if("fullscreen"!==e&&document.fullscreenElement&&document.exitFullscreen(),Player.set("viewStyle",e),Player.container.setAttribute("data-view-style",e),"playlist"!==e&&"image"!==e||Player.controls.preventWrapping(),"fullscreen"!==t||"fullscreen"===e){const[e,t]=(await GM.getValue("size")||"").split(":");e&&t&&Player.position.resize(parseInt(e,10),parseInt(t,10)),Player.position.setPostWidths()}Player.trigger("view",e,t)},toggle:function(e){e&&e.preventDefault(),"none"===Player.container.style.display?Player.show():Player.hide()},hide:function(e){e&&e.preventDefault(),Player.container.style.display="none",Player.isHidden=!0,Player.trigger("hide")},show:async function(e){e&&e.preventDefault(),Player.container.style.display&&(Player.container.style.display=null,Player.isHidden=!1,await Player.trigger("show"))},close:async function(){Player.stop(),Player.hide()},toggleFullScreen:async function(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():(Player.isHidden&&Player.show(),Player.$(`.${ns}-player`).requestFullscreen())},_handleDrop:function(e){e.preventDefault(),e.stopPropagation(),Player.playlist.addFromFiles(e.dataTransfer.files)},_handleFullScreenChange:function(){document.fullscreenElement?(Player.display.setViewStyle("fullscreen"),document.querySelector(`.${ns}-image-link`).removeAttribute("href")):(Player.playing&&(document.querySelector(`.${ns}-image-link`).href=Player.playing.image),Player.playlist.restore()),Player.controls.preventWrapping()},_handleRestore:async function(e){e.preventDefault();const a=e.eventTarget.getAttribute("data-restore"),n=Player.display.dismissed.indexOf(a);a&&n>-1&&(Player.display.dismissed.splice(n,1),Player.$all(`[data-restore="${a}"]`).forEach(e=>{t.elementBefore(l[a],e),e.parentNode.removeChild(e)}),await GM.setValue("dismissed",Player.display.dismissed.join(",")))},_handleDismiss:async function(e){e.preventDefault();const a=e.eventTarget.getAttribute("data-dismiss");a&&!Player.display.dismissed.includes(a)&&(Player.display.dismissed.push(a),Player.$all(`[data-dismiss-id="${a}"]`).forEach(e=>{t.elementBefore(`<a href="#" class="${ns}-restore-link" data-restore="${a}">${o[a]}</a>`,e),e.parentNode.removeChild(e)}),await GM.setValue("dismissed",Player.display.dismissed.join(",")))},ifNotDismissed:function(e,t,a){return l[e]=a,o[e]=t,Player.display.dismissed.includes(e)?`<a href="#" class="${ns}-restore-link" data-restore="${e}">${t}</a>`:a},closeDialogs:function(e){document.querySelectorAll(`.${ns}-dialog`).forEach(t=>{const a=(t._keepOpenFor||[]).concat(t.dataset.allowClick?t:[]);e&&a.find(t=>t===e.target||t.contains(e.target))||(t.parentNode.removeChild(t),Player.trigger("menu-close",t))})},runTitleMarquee:async function(){Player.display._marqueeTO=setTimeout(Player.display.runTitleMarquee,1e3),document.querySelectorAll(`.${ns}-title-marquee`).forEach(e=>{const t=e.parentNode.getBoundingClientRect().width-(e.scrollWidth+1),a=e.getAttribute("data-location");if(t>=0)return e.style.marginLeft=null;const n=Player.display._marquees[a]=Player.display._marquees[a]||{direction:1,position:parseInt(e.style.marginLeft,10)||0};n.pause>0?n.pause--:(n.position-=20*n.direction,(n.position>0||n.position<t)&&(n.position=Math.min(0,Math.max(n.position,t)),n.direction*=-1,n.pause=1),e.style.marginLeft=n.position+"px")})},initPopovers:function(e){e.querySelectorAll(`.${ns}-popover`).forEach(e=>{e.addEventListener("mouseenter",Player.display._popoverMouseEnter),e.addEventListener("mouseleave",Player.display._popoverMouseLeave),e.addEventListener("click",Player.display._popoverClick)})},_popoverMouseEnter:e=>{const a=e.currentTarget;a.infoEl&&Player.container.contains(a.infoEl)||(a.infoEl=t.element(`<div class="${ns}-popover-body ${ns}-dialog dialog">${a.dataset.content}</div>`,Player.container),a.infoEl._keepOpenFor=[a],Player.position.showRelativeTo(a.infoEl,a))},_popoverMouseLeave:e=>{const t=e.currentTarget;t.infoEl&&!t.infoEl._clicked&&(t.infoEl.parentNode.removeChild(t.infoEl),delete t.infoEl)},_popoverClick:e=>{const t=e.currentTarget;t.infoEl&&Player.container.contains(t.infoEl)?(t.infoEl._clicked=!t.infoEl._clicked)||Player.display._popoverMouseLeave(e):Player.display._popoverMouseEnter(e)}}}).call(this,a(0))},function(e,t){e.exports=(e={})=>`.${ns}-colorpicker{position:fixed;padding:.25rem;white-space:nowrap;z-index:999}.${ns}-colorpicker .${ns}-cp-saturation{display:inline-block;position:relative}.${ns}-colorpicker .${ns}-cp-saturation .position{width:5px}.${ns}-colorpicker .${ns}-cp-saturation::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;background:#000;-webkit-mask-image:linear-gradient(#0000, #000);mask-image:linear-gradient(#0000, #000)}.${ns}-colorpicker .${ns}-cp-hue{margin-left:.5rem;display:inline-block;position:relative;width:30px;background:linear-gradient(to bottom, #F00, #FF0, #0F0, #0FF, #00F, #F0F, #F00)}.${ns}-colorpicker .${ns}-cp-hue .position{top:-3px;left:-1px;right:-1px}.${ns}-colorpicker .${ns}-cp-saturation .position,.${ns}-colorpicker .${ns}-cp-hue .position{position:absolute;height:5px;border-radius:1rem}.${ns}-colorpicker .${ns}-output{vertical-align:top;margin-left:1rem;display:inline-block}.${ns}-colorpicker .${ns}-output .${ns}-rgb-input{width:2rem}.${ns}-colorpicker .${ns}-output .output-color{height:40px;margin:.25rem 0}.${ns}-cp-preview,.${ns}-cp-saturation .position,.${ns}-cp-hue .position,.${ns}-output .output-color{border:solid 1px #000;box-shadow:inset 0 0 0 1px #eee}.${ns}-cp-preview{height:1em;width:1em;margin-left:.125rem}.${ns}-text-muted{color:#909090}.${ns}-controls{align-items:center;padding:.5rem 0;position:relative;background:${Player.config.colors.controls_background};justify-content:space-between}.${ns}-controls>div{margin:0 .5rem}.${ns}-controls .${ns}-current-time{color:${Player.config.colors.controls_inactive}}.${ns}-controls .${ns}-media-control{width:1.5rem;height:1.5rem;font-size:1rem;color:${Player.config.colors.controls_inactive}}.${ns}-controls .${ns}-media-control:hover{color:${Player.config.colors.controls_active}}.${ns}-media-control{display:flex;justify-content:center;align-items:center;cursor:pointer}.${ns}-media-control.${ns}-hover-fill svg[class$=-fill],.${ns}-media-control.${ns}-hover-fill svg[class*="-fill "]{display:none}.${ns}-media-control.${ns}-hover-fill:hover svg{display:none}.${ns}-media-control.${ns}-hover-fill:hover svg[class$=-fill],.${ns}-media-control.${ns}-hover-fill:hover svg[class*="-fill "]{display:block}.${ns}-media-control.${ns}-play-button:not(.${ns}-play) svg.bi-play-fill,.${ns}-media-control.${ns}-play-button:not(.${ns}-play) svg.bi-play{display:none !important}.${ns}-media-control.${ns}-play-button.${ns}-play svg.bi-pause-fill,.${ns}-media-control.${ns}-play-button.${ns}-play svg.bi-pause{display:none !important}.${ns}-media-control.${ns}-fullscreen-button svg.bi-fullscreen-exit{display:none}#${ns}-container[data-view-style=fullscreen] .${ns}-media-control.${ns}-fullscreen-button svg.bi-fullscreen-exit{display:block}#${ns}-container[data-view-style=fullscreen] .${ns}-media-control.${ns}-fullscreen-button svg.bi-fullscreen{display:none}.${ns}-media-control.${ns}-volume-button.mute .bi:not(.bi-volume-mute):not(.bi-volume-mute-fill){display:none}.${ns}-media-control.${ns}-volume-button.up .bi:not(.bi-volume-up):not(.bi-volume-up-fill){display:none}.${ns}-progress-bar{min-width:3.5rem;height:1.5rem;display:flex;align-items:center}.${ns}-progress-bar .${ns}-full-bar{height:.3rem;width:100%;background:${Player.config.colors.controls_empty_bar};border-radius:1rem;position:relative}.${ns}-progress-bar .${ns}-full-bar>div{position:absolute;top:0;bottom:0;border-radius:1rem}.${ns}-progress-bar .${ns}-full-bar .${ns}-loaded-bar{background:${Player.config.colors.controls_loaded_bar}}.${ns}-progress-bar .${ns}-full-bar .${ns}-current-bar{display:flex;justify-content:flex-end;align-items:center}.${ns}-progress-bar .${ns}-full-bar .${ns}-current-bar:after{content:"";background:${Player.config.colors.controls_inactive};height:.8rem;min-width:.8rem;border-radius:1rem;box-shadow:rgba(0,0,0,.76) 0 0 3px 0;margin-right:-0.4rem}.${ns}-progress-bar:hover .${ns}-current-bar:after{background:${Player.config.colors.controls_active}}.${ns}-seek-bar .${ns}-current-bar{background:${Player.config.colors.controls_active}}.${ns}-volume-bar .${ns}-current-bar{background:${Player.config.colors.controls_inactive}}.${ns}-chan-x-controls .${ns}-current-time,.${ns}-chan-x-controls .${ns}-duration{margin:0 .25rem}.${ns}-header,.${ns}-footer{text-align:center;padding:.125rem;max-width:100%;line-height:1rem}.${ns}-header:hover .${ns}-hover-display,.${ns}-footer:hover .${ns}-hover-display{display:flex}.${ns}-header .${ns}-expander,.${ns}-footer .${ns}-expander{opacity:0;position:absolute;bottom:-0.25rem;right:-0.25rem;height:.75rem;width:.75rem;cursor:se-resize;background:linear-gradient(to bottom right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 50%, ${Player.config.colors.border} 55%, ${Player.config.colors.border} 100%)}.${ns}-header .${ns}-expander[data-direction=sw],.${ns}-footer .${ns}-expander[data-direction=sw]{left:-0.25rem;right:auto;transform:rotate(90deg);cursor:sw-resize}.${ns}-header .${ns}-expander[data-direction=nw],.${ns}-footer .${ns}-expander[data-direction=nw]{left:-0.25rem;top:-0.25rem;right:auto;bottom:auto;transform:rotate(180deg);cursor:nw-resize}.${ns}-header .${ns}-expander[data-direction=ne],.${ns}-footer .${ns}-expander[data-direction=ne]{right:-0.25rem;top:-0.25rem;bottom:auto;transform:rotate(270deg);cursor:ne-resize}.${ns}-header{cursor:grab;border-bottom:solid 1px ${Player.config.colors.border}}.${ns}-footer{cursor:grab;border-top:solid 1px ${Player.config.colors.border}}.${ns}-title-marquee{transition:margin-left 1s linear}.${ns}-menu svg.bi{margin:0 -0.25rem 0 .25rem}.${ns}-header svg.bi,.${ns}-footer svg.bi{margin:0 .125rem}.muted svg.bi{opacity:.45}svg.bi{overflow:visible;height:1em;width:1em}.${ns}-image-link{text-align:center;display:flex;flex-grow:1;justify-content:center;overflow:hidden;position:relative}.${ns}-image-link.${ns}-show-video .${ns}-video{display:block}.${ns}-image-link.${ns}-show-video .${ns}-image{display:none}.${ns}-image-link.${ns}-pip{position:fixed;right:10px;align-items:end}.${ns}-image-link.${ns}-pip .${ns}-image,.${ns}-image-link.${ns}-pip .${ns}-video{width:auto;height:auto;max-height:${Player.config.maxPIPWidth};max-width:${Player.config.maxPIPWidth};object-fit:contain}.${ns}-image-link .${ns}-video{display:none}.${ns}-image-link .${ns}-image,.${ns}-image-link .${ns}-video{height:100%;width:100%;object-fit:contain}.${ns}-image-link .${ns}-background-image{position:absolute;top:-20px;bottom:-20px;left:-20px;right:-20px;object-fit:cover;object-position:center;height:calc(100% + 40px);width:calc(100% + 40px);filter:blur(10px) brightness(0.7) saturate(0.5) contrast(0.7);z-index:-1}.${ns}-image-link .${ns}-background-image:not([src]){display:none}#${ns}-container[data-view-style=fullscreen].playing-video .${ns}-image-link{background:#000}#${ns}-container[data-view-style=fullscreen].playing-video .${ns}-background-image{display:none}#${ns}-container{position:fixed;display:flex;flex-direction:column;background:${Player.config.colors.background};color:${Player.config.colors.text};border:1px solid ${Player.config.colors.border};box-sizing:border-box;min-width:7rem}.${ns}-panel{padding:0 .25rem;height:100%;width:calc(100% - .5rem);overflow:auto}.${ns}-heading{font-weight:600;margin:.5rem 0}.${ns}-has-description{cursor:help}.${ns}-heading-action{font-weight:normal;text-decoration:underline;display:inline-flex}.${ns}-row{display:flex;flex-wrap:wrap;min-width:100%;box-sizing:border-box}.${ns}-row.nowrap{flex-wrap:nowrap}.${ns}-col-auto{flex:0 0 auto;width:auto;max-width:100%;display:inline-flex}.${ns}-col{flex-basis:0;flex-grow:1;max-width:100%;width:100%;position:relative}.${ns}-align-center{align-items:center;align-content:center;align-self:center}.${ns}-align-start{align-items:start;align-content:start;align-self:start}.${ns}-space-between{justify-content:space-between}html.fourchan-x #${ns}-container .fa{font-size:0;visibility:hidden;margin:0 .15rem}.${ns}-truncate-text{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.${ns}-hover-display{display:none}.${ns}-player{display:flex;flex-direction:column;flex-grow:1;overflow:auto}.${ns}-player .${ns}-hover-image{position:fixed;max-height:125px;max-width:125px}.${ns}-player.${ns}-hide-hover-image .${ns}-hover-image{display:none !important}.${ns}-list-container{flex-grow:1;overflow:auto}.${ns}-list-container .${ns}-list-item{list-style-type:none;padding:.15rem .25rem;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;background:${Player.config.colors.odd_row};overflow:hidden;height:1.3rem}.${ns}-list-container .${ns}-list-item:nth-child(2n){background:${Player.config.colors.even_row}}.${ns}-list-container .${ns}-list-item:nth-child(n).playing{background:${Player.config.colors.playing}}.${ns}-list-container .${ns}-list-item .${ns}-item-menu-button{right:.25rem}.${ns}-list-container .${ns}-list-item:hover .${ns}-hover-display{display:flex}.${ns}-list-container .${ns}-list-item.${ns}-dragging{background:${Player.config.colors.dragging}}.${ns}-settings textarea{border:solid 1px ${Player.config.colors.border};min-width:100%;min-height:4rem;box-sizing:border-box;white-space:pre}.${ns}-settings .${ns}-sub-settings .${ns}-col{min-height:1.55rem;display:flex;align-items:center;align-content:center;white-space:nowrap}.${ns}-settings .${ns}-settings-tabs{justify-content:space-between;flex-direction:row-reverse;margin:0 -0.25rem}.${ns}-settings .${ns}-settings-tab-group{text-align:center;white-space:nowrap;align-items:center}.${ns}-settings .${ns}-settings-tab{display:flex;margin:.25rem;text-decoration:underline;text-align:center}.${ns}-settings .${ns}-settings-tab.active{font-weight:bold}.${ns}-settings .${ns}-settings-tab svg.bi{margin:0 -0.125rem}.${ns}-settings .${ns}-settings-group{display:none}.${ns}-settings .${ns}-settings-group.active{display:block}.${ns}-settings .${ns}-host-input{margin:.5rem 0;border-top:solid 1px ${Player.config.colors.border}}.${ns}-settings .${ns}-host-input.invalid{border:solid 1px red}.${ns}-settings .${ns}-host-input .${ns}-host-controls{align-items:center;justify-content:space-between;margin:.125rem 0}.${ns}-settings .${ns}-host-input input[type=text]{min-width:100%;box-sizing:border-box}.${ns}-theme-save-options{position:fixed;max-height:20rem;overflow:auto;padding:.25rem}.${ns}-theme-save-options:not(.fields-collapsed) .bi-chevron-down,.${ns}-theme-save-options.fields-collapsed .bi-chevron-up,.${ns}-theme-save-options.fields-collapsed input[type=checkbox]:not(:checked),.${ns}-theme-save-options.fields-collapsed input[type=checkbox]:not(:checked)+label{display:none}.${ns}-info-circle{cursor:pointer}.${ns}-info-circle svg{height:.8em;width:.8em}.${ns}-popover-body{position:fixed;padding:.25rem;max-width:12rem;text-align:center;border-radius:.3rem}.${ns}-threads .${ns}-thread-board-list label{display:inline-block;width:4rem}.${ns}-threads .${ns}-thread-list{margin:.5rem -0.25rem 0;padding:.5rem 1rem;border-top:solid 1px ${Player.config.colors.border}}.${ns}-threads .${ns}-thread-list .boardBanner{margin:1rem 0}.${ns}-threads table{border-top:solid 1px ${Player.config.colors.border};width:100%;margin-top:.5rem;border-collapse:collapse}.${ns}-threads table th{border-bottom:solid 1px ${Player.config.colors.border}}.${ns}-threads table th,.${ns}-threads table td{text-align:left;padding:.25rem}.${ns}-threads table tr{padding:.25rem 0}.${ns}-threads table .${ns}-threads-body tr{background:${Player.config.colors.even_row}}.${ns}-threads table .${ns}-threads-body tr:nth-child(2n){background:${Player.config.colors.odd_row}}.${ns}-create-sound-status{margin-top:.5rem;border:solid 1px ${Player.config.colors.border};border-radius:5px;padding:.25rem}.${ns}-file-input,.${ns}-tools input[type=text]{width:100%;color:#000}.${ns}-file-overlay,.${ns}-tools input[type=text]{box-sizing:border-box;height:1.5rem;border:solid 1px ${Player.config.colors.border};min-width:5rem;display:flex;align-items:center;padding:0 .25rem;margin:0}.${ns}-file-input.placeholder span,.${ns}-create-sound-form input[type=text]::placeholder{color:#aaa;opacity:1}.${ns}-file-input .${ns}-file-overlay{position:relative;background:#fff}.${ns}-file-input .placeholder-text{display:none}.${ns}-file-input.placeholder .placeholder-text{display:inherit}.${ns}-file-input span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.${ns}-file-input input[type=file]{width:100%;box-sizing:border-box;height:100%;position:absolute;left:0;opacity:0}.${ns}-file-input .overfile{z-index:9999}.${ns}-file-input .${ns}-file-list{padding:0 .25rem}.${ns}-file-input .${ns}-file-list:empty{display:none}.${ns}-input-append{position:absolute;display:flex;align-items:center;background:#fff;padding-left:.25rem;right:.125rem}.${ns}-threads,.${ns}-settings,.${ns}-tools,.${ns}-player{display:none}#${ns}-container[data-view-style=settings] .${ns}-settings{display:block}#${ns}-container[data-view-style=threads] .${ns}-threads{display:block}#${ns}-container[data-view-style=tools] .${ns}-tools{display:block}#${ns}-container[data-view-style=image] .${ns}-player,#${ns}-container[data-view-style=playlist] .${ns}-player,#${ns}-container[data-view-style=fullscreen] .${ns}-player{display:flex}#${ns}-container[data-view-style=image] .${ns}-list-container,#${ns}-container[data-view-style=image] .${ns}-playlist-search{display:none}#${ns}-container[data-view-style=image] .${ns}-image-link{height:auto}#${ns}-container[data-view-style=playlist] .${ns}-image-link{height:125px;flex-shrink:0}#${ns}-container[data-view-style=fullscreen] .${ns}-image-link{height:calc(100% - .4rem) !important}#${ns}-container[data-view-style=fullscreen] .${ns}-controls{position:absolute;left:0;right:0;bottom:calc(-2.5rem + .4rem);opacity:.7}#${ns}-container[data-view-style=fullscreen] .${ns}-controls:hover{bottom:0}#${ns}-container[data-view-style=fullscreen] .${ns}-list-container{position:absolute;top:100%;width:100%}`},function(e,t){e.exports=(e={})=>`.dialog{background:${Player.config.colors.background};background:${Player.config.colors.background};border-color:${Player.config.colors.border};border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.15);border-radius:3px;padding-top:1px;padding-bottom:3px}.entry{position:relative;display:block;padding:.125rem .5rem;min-width:70px;white-space:nowrap}.entry.has-submenu::after{content:"";border-left:.5em solid;border-top:.3em solid transparent;border-bottom:.3em solid transparent;display:inline-block;margin:.35em;position:absolute;right:3px}.entry.focused{background:rgba(255,255,255,.33)}.entry.focused>.submenu{display:block}.submenu{position:absolute;display:none}`},function(e,t){e.exports=(e={})=>`<div id="${ns}-container" data-view-style="${Player.config.viewStyle}" style="top: 30px; left: 0px; width: 360px; height: 360px; display: none;">\n\t<div class="${ns}-header ${ns}-row ${ns}-align-center">\n\t\t${Player.header.template(e)}\n\t</div>\n\n\t<div class="${ns}-player ${Player.config.hoverImages?"":ns+"-hide-hover-image"}">\n\t\t${Player.playlist.template(e)}\n\t</div>\n\t<div class="${ns}-settings ${ns}-panel">\n\t\t${Player.settings.template(e)}\n\t</div>\n\t<div class="${ns}-threads ${ns}-panel">\n\t\t${Player.threads.template(e)}\n\t</div>\n\t<div class="${ns}-tools ${ns}-panel">\n\t\t${Player.tools.template(e)}\n\t</div>\n\n\t<div class="${ns}-footer ${ns}-row ${ns}-align-center">\n\t\t${Player.footer.template(e)}\n\t</div>\n\t<input class="${ns}-add-local-file-input" type="file" style="display: none" accept="image/*,.webm" multiple>\n</div>`},function(e,t){e.exports={template:()=>Player.userTemplate.build({template:Player.config.footerTemplate+`<div class="${ns}-expander" data-direction="sw"></div><div class="${ns}-expander" data-direction="se"></div>`,location:"footer",sound:Player.playing,defaultName:"4chan Sounds",outerClass:ns+"-col-auto"}),initialize:function(){Player.userTemplate.maintain(Player.footer,"footerTemplate")},render:function(){Player.container&&(Player.$(`.${ns}-footer`).innerHTML=Player.footer.template())}}},function(e,t){e.exports={template:()=>Player.userTemplate.build({template:Player.config.headerTemplate+`<div class="${ns}-expander" data-direction="nw"></div><div class="${ns}-expander" data-direction="ne"></div>`,location:"header",sound:Player.playing,defaultName:"4chan Sounds",outerClass:ns+"-col-auto"}),initialize:function(){Player.userTemplate.maintain(Player.header,"headerTemplate")},render:function(){Player.$(`.${ns}-header`).innerHTML=Player.header.template()}}},function(e,t,a){const n=a(3);let s;e.exports={_keyMap:{" ":"space",arrowleft:"left",arrowright:"right",arrowup:"up",arrowdown:"down"},initialize:function(){if(Player.on("rendered",Player.hotkeys.apply),Player.on("config:hotkeys",Player.hotkeys.apply),s=n.reduce((e,t)=>("hotkey_bindings"===t.property&&t.settings.forEach(t=>e[t.property.slice(16)]=t),e),{}),"mediaSession"in navigator&&Player.config.hardwareMediaKeys){const e=[["play",()=>Player.play()],["pause",()=>Player.pause()],["stop",()=>Player.pause()],["previoustrack",()=>Player.previous()],["nexttrack",()=>Player.next()],["seekbackward",e=>Player.audio.currentTime-=e.seekOffset||10],["seekforward",e=>Player.audio.currentTime+=e.seekOffset||10],["seekto",e=>Player.audio.currentTime+=e.seekTime]];for(let[t,a]of e)try{navigator.mediaSession.setActionHandler(t,a)}catch(e){}Player.audio.addEventListener("pause",()=>navigator.mediaSession.playbackState="paused"),Player.audio.addEventListener("ended",()=>navigator.mediaSession.playbackState="paused"),Player.audio.addEventListener("play",(function(){navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new MediaMetadata({title:Player.playing.title,artist:"4chan Sounds Player",album:document.title,artwork:[{src:Player.playing.thumb}]})}))}},addHandler:()=>{Player.hotkeys.removeHandler(),document.body.addEventListener("keydown",Player.hotkeys.handle)},removeHandler:()=>{document.body.removeEventListener("keydown",Player.hotkeys.handle)},apply:function(){const e=Player.config.hotkeys;Player.hotkeys.removeHandler(),Player.off("show",Player.hotkeys.addHandler),Player.off("hide",Player.hotkeys.removeHandler),"always"===e?Player.hotkeys.addHandler():"open"===e&&(Player.isHidden||Player.hotkeys.addHandler(),Player.on("show",Player.hotkeys.addHandler),Player.on("hide",Player.hotkeys.removeHandler))},handle:function(e){if(["INPUT","SELECT","TEXTAREA","INPUT"].includes(e.target.nodeName)||Player.isHidden&&("always"!==Player.config.hotkeys||!Player.sounds.length))return;const t=e.key.toLowerCase(),a=Player.config.hotkey_bindings||{};Object.entries(a).find((function a([n,l]){if(Array.isArray(l))return l.find(e=>a([n,e]));const o=t===l.key&&!!l.shiftKey==!!e.shiftKey&&!!l.ctrlKey==!!e.ctrlKey&&!!l.metaKey==!!e.metaKey&&(!l.ignoreRepeat||!e.repeat)&&s[n];return!!o&&(e.preventDefault(),e._binding=l,Player.getHandler(o.keyHandler)(e),!0)}))},stringifyKey:function(e){let t=e.key.toLowerCase();return Player.hotkeys._keyMap[t]&&(t=Player.hotkeys._keyMap[t]),(e.ctrlKey?"Ctrl+":"")+(e.shiftKey?"Shift+":"")+(e.metaKey?"Meta+":"")+t},parseKey:function(e){const t=e.split("+");let a=t.pop();Object.keys(Player.hotkeys._keyMap).find(e=>Player.hotkeys._keyMap[e]===a&&(a=e));const n={key:a};return t.forEach(e=>n[e.toLowerCase()+"Key"]=!0),n}}},function(e,t,a){(function(t,a){e.exports={_showingPIP:!1,initialize:function(){isChanX&&Player.userTemplate.maintain(Player.minimised,"chanXTemplate",["chanXControls"],["show","hide","stop"]),Player.on("rendered",Player.minimised.render),Player.on("show",Player.minimised.hidePIP),Player.on("hide",Player.minimised.showPIP),Player.on("stop",Player.minimised.hidePIP),Player.on("playsound",Player.minimised.showPIP)},render:function(){if(Player.container&&isChanX){let e=document.querySelector(`.${ns}-chan-x-controls`);if(e||(e=t.elementBefore(`<span class="${ns}-chan-x-controls ${ns}-col-auto ${ns}-align-center"></span>`,document.querySelector("#shortcuts").firstElementChild),Player.events.addDelegatedListeners(e,{click:[Player.userTemplate.delegatedEvents.click,Player.controls.delegatedEvents.click]})),"never"===Player.config.chanXControls||"closed"===Player.config.chanXControls&&!Player.isHidden)return e.innerHTML="";e.innerHTML=Player.userTemplate.build({template:Player.config.chanXTemplate,location:"4chan-X-controls",sound:Player.playing,replacements:{"prev-button":`<a href="#" class="${ns}-media-control ${ns}-previous-button ${ns}-hover-fill">${a.skipStart} ${a.skipStartFill}</a>`,"play-button":`<a href="#" class="${ns}-media-control ${ns}-play-button ${ns}-hover-fill ${!Player.audio||Player.audio.paused?ns+"-play":""}">${a.play} ${a.pause} ${a.playFill} ${a.pauseFill}</a>`,"next-button":`<a href="#" class="${ns}-media-control ${ns}-next-button ${ns}-hover-fill">${a.skipEnd} ${a.skipEndFill} </a>`,"sound-current-time":`<span class="${ns}-current-time">0:00</span>`,"sound-duration":`<span class="${ns}-duration">0:00</span>`}})}},showPIP:function(){if(!Player.isHidden||!Player.config.pip||!Player.playing||Player.minimised._showingPIP)return;Player.minimised._showingPIP=!0;const e=document.querySelector(`.${ns}-image-link`);document.body.appendChild(e),e.classList.add(ns+"-pip"),e.style.bottom=Player.position.getHeaderOffset().bottom+10+"px",e.addEventListener("click",Player.show)},hidePIP:function(){Player.minimised._showingPIP=!1;const e=document.querySelector(`.${ns}-image-link`),t=Player.$(`.${ns}-controls`);t.parentNode.insertBefore(document.querySelector(`.${ns}-image-link`),t),e.classList.remove(ns+"-pip"),e.style.bottom=null,e.removeEventListener("click",Player.show)}}}).call(this,a(0),a(1))},function(e,t,a){(function(t,n){const{parseFiles:s,parseFileName:l}=a(4),{postIdPrefix:o}=a(2),r=a(78);e.exports={atRoot:["add","remove"],public:["search"],template:a(79),listTemplate:a(80),delegatedEvents:{click:{[`.${ns}-list-item`]:"playlist.handleSelect"},mousemove:{[`.${ns}-list-item`]:"playlist.positionHoverImage"},dragstart:{[`.${ns}-list-item`]:"playlist.handleDragStart"},dragenter:{[`.${ns}-list-item`]:"playlist.handleDragEnter"},dragend:{[`.${ns}-list-item`]:"playlist.handleDragEnd"},dragover:{[`.${ns}-list-item`]:e=>e.preventDefault()},drop:{[`.${ns}-list-item`]:e=>e.preventDefault()},keyup:{[`.${ns}-playlist-search`]:"playlist._handleSearch"},contextmenu:{[`.${ns}-list-item`]:"playlist._handleItemMenu"}},undelegatedEvents:{mouseenter:{[`.${ns}-list-item`]:"playlist.updateHoverImage"},mouseleave:{[`.${ns}-list-item`]:"playlist.removeHoverImage"}},initialize:function(){Player.playlist._lastView="playlist"===Player.config.viewStyle||"image"===Player.config.viewStyle?Player.config.viewStyle:"playlist",Player.on("view",e=>{"playlist"===e&&Player.playlist.scrollToPlaying(),"playlist"!==e&&"image"!==e||(Player.playlist._lastView=e)}),Player.on("rendered",()=>Player.playlist.hoverImage=Player.$(`.${ns}-hover-image`)),Player.on("playsound",e=>{Player.playlist.showImage(e),Player.$all(`.${ns}-list-item.playing, .${ns}-list-item[data-id="${Player.playing.id}"]`).forEach(e=>{const a=Player.playlist.listTemplate({sounds:[Player.sounds.find(t=>t.id===e.dataset.id)]});t.elementBefore(a,e),e.parentNode.removeChild(e)}),"fullscreen"!==Player.config.viewStyle&&Player.playlist.scrollToPlaying("nearest"),Player.config.autoScrollThread&&e.post&&(location.href=location.href.split("#")[0]+"#"+o+e.post)}),Player.on("stop",()=>{Player.$all(`.${ns}-list-item.playing`).forEach(e=>e.classList.remove("playing")),Player.playlist.showImage({image:"data:image/svg+xml;base64,"+btoa(n.fcSounds)})}),Player.on("config:filters",Player.playlist.applyFilters),Player.on("config:hoverImages",Player.playlist.setHoverImageVisibility),Player.on("menu-open",Player.playlist.setHoverImageVisibility),Player.on("menu-close",Player.playlist.setHoverImageVisibility),Player.on("config:showPlaylistSearch",Player.playlist.toggleSearch),Player.userTemplate.maintain(Player.playlist,"rowTemplate",["shuffle"])},render:function(){Player.$(`.${ns}-list-container`).innerHTML=Player.playlist.listTemplate(),Player.events.addUndelegatedListeners(document.body,Player.playlist.undelegatedEvents),Player.playlist.hoverImage=Player.$(`.${ns}-hover-image`)},restore:function(){Player.display.setViewStyle(Player.playlist._lastView||"playlist")},showImage:function(e){const t=document.querySelector(`.${ns}-image-link`),a=t.querySelector(`.${ns}-image`),n=t.querySelector(`.${ns}-video`),s=t.querySelector(`.${ns}-background-image`);a.src=s.src="",a.src=s.src=e.imageOrThumb,n.src=Player.isVideo?e.image:void 0,"fullscreen"!==Player.config.viewStyle&&(t.href=e.image),t.classList[Player.isVideo?"add":"remove"](ns+"-show-video")},toggleView:function(e){e&&e.preventDefault();let t="playlist"===Player.config.viewStyle?"image":"image"===Player.config.viewStyle?"playlist":Player.playlist._lastView;Player.display.setViewStyle(t)},add:function(e,a){try{const n=e.id;if(Player.sounds.find(e=>e.id===n))return;let s=Player.config.shuffle?Math.floor(Math.random()*Player.sounds.length-1):Player.sounds.findIndex(e=>Player.compareIds(e.id,n)>1);if(s<0&&(s=Player.sounds.length),Player.sounds.splice(s,0,e),Player.container){if(!a){const a=Player.$(`.${ns}-list-container`);let n=t.element(`<div>${Player.playlist.listTemplate({sounds:[e]})}</div>`);if(Player.events.addUndelegatedListeners(n,Player.playlist.undelegatedEvents),s<Player.sounds.length-1){const e=Player.$(`.${ns}-list-item[data-id="${Player.sounds[s+1].id}"]`);a.insertBefore(n.children[0],e)}else a.appendChild(n.children[0])}1===Player.sounds.length&&Player.playlist.showImage(e),Player.config.autoshow&&/\/thread\//.test(location.href)&&1===Player.sounds.filter(e=>!e.standaloneVideo).length&&Player.show(),Player.trigger("add",e)}}catch(t){Player.logError("There was an error adding to the sound player. Please check the console for details.",t),console.log("[4chan sounds player]",e)}},addFromFiles:function(e){[...e].forEach(e=>{if(!e.type.startsWith("image")&&"video/webm"!==e.type)return;const t=URL.createObjectURL(e),a=e.type;let n=t;if("video/webm"!==e.type)return i();const s=document.createElement("canvas"),o=document.createElement("video"),r=s.getContext("2d");function i(){l(e.name,t,null,n,null,!0).forEach(e=>Player.add({...e,local:!0,type:a}))}o.addEventListener("loadeddata",(function(){r.drawImage(o,0,0),n=s.toDataURL(),i()})),o.src=t})},remove:function(e){const t=Player.sounds.indexOf(e);Player.playing===e&&Player.next({force:!0,paused:Player.audio.paused}),t>-1&&Player.sounds.splice(t,1),Player.$(`.${ns}-list-container`).removeChild(Player.$(`.${ns}-list-item[data-id="${e.id}"]`)),Player.trigger("remove",e)},handleSelect:function(e){if("A"===e.target.nodeName||e.target.closest("a"))return;e.preventDefault();const t=e.eventTarget.getAttribute("data-id"),a=t&&Player.sounds.find(e=>e.id===t);a&&Player.play(a)},refresh:function(){s(document.body)},_handleItemMenu:function(e){e.preventDefault(),e.stopPropagation();const a=e.eventTarget.getAttribute("data-id"),n=Player.sounds.find(e=>e.id===a),s=e.eventTarget.closest(`.${ns}-list-container`)||Player.container,l=t.element(r({sound:n,postIdPrefix:o}),s),i=e.eventTarget.classList.contains(ns+"-item-menu-button")?e.eventTarget:e;Player.userTemplate._showMenu(i,l,s)},toggleHoverImages:function(e){e&&e.preventDefault(),Player.set("hoverImages",!Player.config.hoverImages)},setHoverImageVisibility:function(){const e=Player.$(`.${ns}-player`),t=!Player.config.hoverImages||Player.playlist._dragging||e.querySelector(`.${ns}-menu`);e.classList[t?"add":"remove"](ns+"-hide-hover-image")},updateHoverImage:function(e){const t=e.currentTarget.getAttribute("data-id"),a=Player.sounds.find(e=>e.id===t);Player.playlist.hoverImage.style.display="block",Player.playlist.hoverImage.setAttribute("src",a.thumb),Player.playlist.positionHoverImage(e)},positionHoverImage:function(e){const{width:t,height:a}=Player.playlist.hoverImage.getBoundingClientRect(),n=document.documentElement.clientWidth-t-5;Player.playlist.hoverImage.style.left=Math.min(e.clientX,n)+5+"px",Player.playlist.hoverImage.style.top=e.clientY-a-10+"px"},removeHoverImage:function(){Player.playlist.hoverImage.style.display="none"},handleDragStart:function(e){Player.playlist._dragging=e.eventTarget,Player.playlist.setHoverImageVisibility(),e.eventTarget.classList.add(ns+"-dragging"),e.dataTransfer.setDragImage(new Image,0,0),e.dataTransfer.dropEffect="move",e.dataTransfer.setData("text/plain",e.eventTarget.getAttribute("data-id"))},handleDragEnter:function(e){if(!Player.playlist._dragging)return;e.preventDefault();const t=Player.playlist._dragging,a=t.getAttribute("data-id");let n=e.target.closest&&e.target.closest(`.${ns}-list-item`);if(!n||t===n)return;const s=Player.sounds.findIndex(e=>e.id===a),l=t.parentNode;if(4&t.compareDocumentPosition(n)&&(n=n.nextSibling),n){const e=n.getAttribute("data-id"),a=Player.sounds.findIndex(t=>t.id===e),o=s<a?a-1:a;l.insertBefore(t,n),Player.sounds.splice(o,0,Player.sounds.splice(s,1)[0])}else Player.sounds.push(Player.sounds.splice(s,1)[0]),l.appendChild(t);Player.trigger("order")},handleDragEnd:function(e){Player.playlist._dragging&&(e.preventDefault(),delete Player.playlist._dragging,e.eventTarget.classList.remove(ns+"-dragging"),Player.playlist.setHoverImageVisibility())},scrollToPlaying:function(e="center"){if(Player.$(`.${ns}-list-container .${ns}-menu`))return;const t=Player.$(`.${ns}-list-item.playing`);t&&t.scrollIntoView({block:e})},applyFilters:function(){Player.sounds.filter(e=>!Player.acceptedSound(e)).forEach(Player.playlist.remove)},_handleSearch:function(e){Player.playlist.search(e.eventTarget.value.toLowerCase())},search:function(e){const t=Player.playlist._lastSearch;if(Player.playlist._lastSearch=e,e!==t)return e?void Player.sounds.forEach(e=>{const t=Player.$(`.${ns}-list-item[data-id="${e.id}"]`);t&&(t.style.display=Player.playlist.matchesSearch(e)?null:"none")}):Player.$all(`.${ns}-list-item`).forEach(e=>e.style.display=null)},matchesSearch:function(e){const t=Player.playlist._lastSearch;return!t||e.title.toLowerCase().includes(t)||String(e.post.toLowerCase()).includes(t)||String(e.src.toLowerCase()).includes(t)},toggleSearch:function(e){const t=Player.$(`.${ns}-playlist-search`);!e&&Player.playlist._lastSearch&&Player.playlist.search(),t.style.display=e?null:"none",e&&t.focus()}}}).call(this,a(0),a(1))},function(e,t){e.exports=(e={})=>`<div class="${ns}-menu dialog ${ns}-dialog" id="menu" tabindex="0" data-type="post" style="position: fixed;">\n\t<a class="${ns}-remove-link entry focused" href="javascript:;" data-id="${e.sound.id}">Remove</a>\n\t${e.sound.post?`<a class="entry" href="#${e.postIdPrefix+e.sound.post}">Show Post</a>`:""}\n\t<div class="entry has-submenu">\n\t\tOpen\n\t\t<div class="dialog submenu" style="inset: 0px auto auto 100%;">\n\t\t\t<a class="entry" href="${e.sound.image}" target="_blank">Image</a>\n\t\t\t<a class="entry" href="${e.sound.src}" target="_blank">Sound</a>\n\t\t</div>\n\t</div>\n\t<div class="entry has-submenu">\n\t\tDownload\n\t\t<div class="dialog submenu" style="inset: 0px auto auto 100%;">\n\t\t\t<a class="${ns}-download-link entry" href="javascript:;" data-src="${e.sound.image}" data-name="${e.sound.filename}">Image</a>\n\t\t\t<a class="${ns}-download-link entry" href="javascript:;" data-src="${e.sound.src}" data-name="${e.sound.name}">Sound</a>\n\t\t</div>\n\t</div>\n\t<div class="entry has-submenu">\n\t\tFilter\n\t\t<div class="dialog submenu" style="inset: 0px auto auto 100%;">\n\t\t\t${e.sound.imageMD5?`<a class="${ns}-filter-link entry" href="javascript:;" data-filter="${e.sound.imageMD5}">Image</a>`:""}\n\t\t\t<a class="${ns}-filter-link entry" href="javascript:;" data-filter="${e.sound.src.replace(/^(https?\:)?\/\//,"")}">Sound</a>\n\t\t</div>\n\t</div>\n</div>`},function(e,t,a){(function(t){e.exports=(e={})=>`<a class="${ns}-image-link" target="_blank">\n\t<img class="${ns}-background-image"></img>\n\t<img id="fcspImage" class="${ns}-image" src="data:image/svg+xml;base64,${btoa(t.fcSounds)}"></img>\n\t<video class="${ns}-video"></video>\n</a>\n<div class="${ns}-controls ${ns}-row">\n\t${Player.controls.template(e)}\n</div>\n<input class="${ns}-playlist-search" type="input" placeholder="Search" style="min-width: 100%; box-sizing: border-box; ${Player.config.showPlaylistSearch?"":"display: none;"}">\n<div class="${ns}-list-container">\n\t${Player.playlist.listTemplate(e)}\n</div>\n<img class="${ns}-hover-image">`}).call(this,a(1))},function(e,t){e.exports=(e={})=>(e.sounds||Player.sounds).map(e=>`<div class="${ns}-list-item ${ns}-row ${e.playing?"playing":""}" data-id="${e.id}" ${Player.playlist.matchesSearch(e)?"":'style="display: none"'} draggable="true">\n\t\t${Player.userTemplate.build({template:Player.config.rowTemplate,location:"item-"+e.id,sound:e,outerClass:ns+"-col-auto"})}\n\t</div>`).join("")},function(e,t,a){const n=a(2);e.exports={delegatedEvents:{mousedown:{[`.${ns}-header`]:"position.initMove",[`.${ns}-expander`]:"position.initResize"},touchstart:{[`.${ns}-header`]:"position.initMove",[`.${ns}-expander`]:"position.initResize"}},initialize:function(){const{top:e,bottom:t}=Player.position.getHeaderOffset();Player.config.offsetTop=e+"px",Player.config.offsetBottom=t+"px",Player.on("show",(async function(){const[e,t]=(await GM.getValue("position")||"").split(":"),[a,n]=(await GM.getValue("size")||"").split(":");+e&&+t&&Player.position.move(e,t,!0),+a&&+n&&Player.position.resize(a,n),Player.config.limitPostWidths&&(Player.position.setPostWidths(),window.addEventListener("scroll",Player.position.setPostWidths))})),Player.on("hide",(function(){Player.position.setPostWidths(),window.removeEventListener("scroll",Player.position.setPostWidths)})),Player.on("config",e=>{"limitPostWidths"!==e&&"minPostWidth"!==e||(window.removeEventListener("scroll",Player.position.setPostWidths),Player.position.setPostWidths(),Player.config.limitPostWidths&&window.addEventListener("scroll",Player.position.setPostWidths))}),new MutationObserver((function(){document.querySelectorAll("#hoverUI .postContainer, .inline .postContainer, .backlink_container article").forEach(e=>{e.style.maxWidth=null,e.style.minWidth=null})})).observe(document.body,{childList:!0,subtree:!0}),Player.syncTab("position",e=>Player.position.move(...e.split(":").concat(!0))),Player.syncTab("size",e=>Player.position.resize(...e.split(":")))},setPostWidths:function(){const e=document.documentElement.clientWidth-Player.container.offsetLeft+10,t=!Player.isHidden&&Player.config.limitPostWidths,a=Player.container.offsetTop,s=Player.container.getBoundingClientRect().height+a;document.querySelectorAll(n.limitWidthOf).forEach(n=>{const l=t&&n.getBoundingClientRect(),o=t&&l.top+l.height>a&&l.top<s;n.style.maxWidth=o?`calc(100% - ${e}px)`:null,n.style.minWidth=o&&Player.config.minPostWidth?""+Player.config.minPostWidth:null})},initResize:function(e){try{e.preventDefault()}catch(e){}Player._startX=(e.touches&&e.touches[0]||e).clientX,Player._startY=(e.touches&&e.touches[0]||e).clientY;let{width:t,height:a}=Player.container.getBoundingClientRect();Player._startWidth=t,Player._startHeight=a,Player._startTop=Player.container.offsetTop,Player._startLeft=Player.container.offsetLeft;const n=e.eventTarget.dataset.direction||"se";Player._resizeX=n.includes("e")?1:n.includes("w")?-1:0,Player._resizeY=n.includes("s")?1:n.includes("n")?-1:0,Player._resizeMoveX=n.includes("w")?-1:0,Player._resizeMoveY=n.includes("n")?-1:0,Player._resizeTarget=e.eventTarget,document.documentElement.addEventListener("mousemove",Player.position.doResize,!1),document.documentElement.addEventListener("touchmove",Player.position.doResize,!1),document.documentElement.addEventListener("mouseup",Player.position.stopResize,!1),document.documentElement.addEventListener("touchend",Player.position.stopResize,!1)},doResize:function(e){try{e.preventDefault()}catch(e){}const t=((e.touches&&e.touches[0]||e).clientX-Player._startX)*Player._resizeX,a=((e.touches&&e.touches[0]||e).clientY-Player._startY)*Player._resizeY,n="true"!==Player._resizeTarget.dataset.bypassPosition&&(Player._resizeMoveX||Player._resizeMoveY);Player.position.resize(Player._startWidth+t,Player._startHeight+a,n||Player._resizeTarget.dataset.allowOffscreen),n&&Player.position.move(Player._startLeft+t*Player._resizeMoveX,Player._startTop+a*Player._resizeMoveY)},stopResize:function(e){try{e.preventDefault()}catch(e){}const{width:t,height:a}=Player.container.getBoundingClientRect();document.documentElement.removeEventListener("mousemove",Player.position.doResize,!1),document.documentElement.removeEventListener("touchmove",Player.position.doResize,!1),document.documentElement.removeEventListener("mouseup",Player.position.stopResize,!1),document.documentElement.removeEventListener("touchend",Player.position.stopResize,!1),"true"!==Player._resizeTarget.dataset.bypassSave&&(GM.setValue("size",t+":"+a),(Player._resizeMoveX||Player._resizeMoveY)&&GM.setValue("position",parseInt(Player.container.style.left,10)+":"+parseInt(Player.container.style.top,10)))},resize:function(e,t,a){if(!Player.container||"fullscreen"===Player.config.viewStyle)return;const{bottom:n}=Player.position.getHeaderOffset();a||(t=Math.min(t,document.documentElement.clientHeight-Player.container.offsetTop-n),e=Math.min(e,document.documentElement.clientWidth-Player.container.offsetLeft)),Player.container.style.width=e+"px",Player.container.style.height=t+"px",Player.controls.preventWrapping()},initMove:function(e){if("A"===e.target.nodeName||e.target.classList.contains(ns+"-expander"))return;try{e.preventDefault()}catch(e){}Player.$(`.${ns}-header`).style.cursor="grabbing";const{width:t,height:a}=Player.container.getBoundingClientRect();Player.position.resize(t,a);const n=(e.touches&&e.touches[0]||e).clientX,s=(e.touches&&e.touches[0]||e).clientY;Player._offsetX=n-Player.container.offsetLeft,Player._offsetY=s-Player.container.offsetTop,document.documentElement.addEventListener("mousemove",Player.position.doMove,!1),document.documentElement.addEventListener("touchmove",Player.position.doMove,!1),document.documentElement.addEventListener("mouseup",Player.position.stopMove,!1),document.documentElement.addEventListener("touchend",Player.position.stopMove,!1)},doMove:function(e){try{e.preventDefault()}catch(e){}const t=(e.touches&&e.touches[0]||e).clientX,a=(e.touches&&e.touches[0]||e).clientY;Player.position.move(t-Player._offsetX,a-Player._offsetY)},stopMove:function(e){try{e.preventDefault()}catch(e){}document.documentElement.removeEventListener("mousemove",Player.position.doMove,!1),document.documentElement.removeEventListener("touchmove",Player.position.doMove,!1),document.documentElement.removeEventListener("mouseup",Player.position.stopMove,!1),document.documentElement.removeEventListener("touchend",Player.position.stopMove,!1),Player.$(`.${ns}-header`).style.cursor=null,GM.setValue("position",parseInt(Player.container.style.left,10)+":"+parseInt(Player.container.style.top,10))},move:function(e,t,a){if(!Player.container)return;const{top:n,bottom:s}=Player.position.getHeaderOffset(),{width:l,height:o}=Player.container.getBoundingClientRect(),r=a?1/0:document.documentElement.clientWidth-l,i=a?1/0:document.documentElement.clientHeight-o-s;Player.container.style.left=Math.max(0,Math.min(e,r))+"px",Player.container.style.top=Math.max(n,Math.min(t,i))+"px",Player.config.limitPostWidths&&Player.position.setPostWidths()},getHeaderOffset:function(){const e=document.documentElement.classList,t=e.contains("fixed"),a=t?document.querySelector("#header-bar").getBoundingClientRect().height:0;return{top:t&&e.contains("top-header")?a:0,bottom:t&&e.contains("bottom-header")?a:0}},showRelativeTo:function(e,t){const a=t instanceof Node?t.getBoundingClientRect():{top:t.clientY,left:t.clientX,width:0,height:0};e.style.top=a.top+a.height+"px",e.style.left=a.left+"px";const{width:n,height:s}=e.getBoundingClientRect();a.left+n>document.documentElement.clientWidth&&(e.style.left=a.left+a.width-n+"px"),a.top+a.height+s>document.documentElement.clientHeight-Player.position.getHeaderOffset().bottom&&(e.style.top=a.top-s+"px")}}},function(e,t,a){(function(t){const n=a(2),s=a(3),l=a(83);e.exports={public:["switch","next","previous"],savedThemesTemplate:a(84),themeKeybindsTemplate:a(85),delegatedEvents:{click:{[`.${ns}-save-theme`]:"theme._save",[`.${ns}-toggle-theme-save-fields`]:t.noDefault(()=>Player.theme._toggleSaveFields())},keyup:{[`.${ns}-save-theme-name`]:e=>{Player.$(`.${ns}-save-theme`).innerHTML=Player.config.savedThemes[e.eventTarget.value]?"Update":"Create"}}},initialize:async function(){Player.theme.render(),Player.userTemplate.maintain(Player.theme,"customCSS"),Player.theme.validateOrder()},render:function(){Player.userStylesheet=Player.userStylesheet||t.element('<style id="sound-player-user-css"></style>',document.head),Player.userStylesheet.innerHTML=Player.userTemplate.build({template:"/* Sounds Player User CSS */\n\n"+Player.config.customCSS,sound:Player.playing,ignoreButtons:!0,ignoreDisplayBlocks:!0,ignoreSoundName:!0,ignoreVersion:!0})},forceBoardTheme:function(){Player.theme.applyBoardTheme({force:!0}),Player.settings.save()},applyBoardTheme:function(e={}){const a=t.element(`<div class="${n.styleFetcher}"></div>`,document.body),l=document.defaultView.getComputedStyle(a);if("rgba(0, 0, 0, 0)"===l.backgroundColor)return setTimeout(Player.display.applyBoardTheme,0);Object.assign(l,{page_background:window.getComputedStyle(document.body).backgroundColor});const o={"colors.text":"color","colors.background":"backgroundColor","colors.odd_row":"backgroundColor","colors.border":"borderBottomColor","colors.even_row":l.borderBottomColor===l.color?"backgroundColor":"borderBottomColor","colors.page_background":"page_background"};s.find(e=>"colors"===e.property).settings.forEach(a=>{const n=e.force||a.default===t.get(Player.config,a.property);o[a.property]&&(a.default=l[o[a.property]]),n&&Player.set(a.property,a.default,{bypassSave:!0,bypassRender:!0,bypassStylesheet:!0})}),document.body.removeChild(a),e.bypassRender||(Player.display.updateStylesheet(),Player.settings.render())},next:function(){const e=["Default"].concat(Player.config.savedThemesOrder),t=e.indexOf(Player.config.selectedTheme),a=e[(t+e.length+1)%e.length];Player.theme.switch(a)},previous:function(){const e=["Default"].concat(Player.config.savedThemesOrder),t=e.indexOf(Player.config.selectedTheme),a=e[(t+e.length-1)%e.length];Player.theme.switch(a)},switch:function(e){if("Default"!==e&&!Player.config.savedThemes[e])return Player.logError(`Theme '${e}' does not exist.`,null,"warning");Player.set("selectedTheme",e),"Default"===e?(["headerTemplate","footerTemplate","rowTemplate","chanXTemplate","customCSS"].forEach(e=>{Player.settings.reset(e,{bypassRender:!0,bypassStylesheet:!0})}),Player.settings.render(),Player.display.updateStylesheet()):Player.settings.load(Player.config.savedThemes[e])},validateOrder:function(){const e=Player.config.savedThemesOrder;let t;Player.config.savedThemesOrder=e.concat(Object.keys(Player.config.savedThemes)).filter((a,n)=>Player.config.savedThemes[a]&&(t=e.indexOf(a),-1===t||t===n))},_parseSwitch:function(e,t,a){t=[...t];const n=a.eventTarget.parentNode.dataset.name;"Default"===n||Player.config.savedThemes[n]||Player.logError(`No theme named '${n}'.`,null,"warning");const s=Player.hotkeys.parseKey(e);if(s.key){let e=t.find(e=>e.themeName===n);e||t.push(e={themeName:n}),Object.assign(e,s)}else t=t.filter(e=>e.themeName!==n);return t},_handleSwitch:function(e){Player.theme.switch(e._binding.themeName)},_moveUp:(e,t)=>Player.theme._swapOrder(t,-1),_moveDown:(e,t)=>Player.theme._swapOrder(t,1),_swapOrder:function(e,t){const a=e.eventTarget.closest("[data-theme]").dataset.theme,n=Player.config.savedThemesOrder,s=n.indexOf(a);s+t>=0&&s+t<n.length&&([n[s],n[s+t]]=[n[s+t],n[s]],Player.$(`[data-theme="${a}"]`).style.order=s+t,Player.$(`[data-theme="${n[s]}"]`).style.order=s,Player.settings.set("savedThemes",Player.config.savedThemes,{bypassValidation:!0,bypassRender:!0}))},_remove:function(e,t){const a=Player.config.savedThemes,n=t.eventTarget.closest("[data-theme]"),s=n.dataset.theme;if("Default"===s)return Player.logError("Cannot delete the default theme. You can instead overwrite it.",null,"warning");Player.settings.findDefault("savedThemes").default[s]?a[s]=null:delete a[s],Player.config.savedThemesOrder=Player.config.savedThemesOrder.filter(e=>e!==s),n.parentNode.removeChild(n),Player.settings.set("savedThemes",a,{bypassValidation:!0,bypassRender:!0});const l=Player.config.hotkey_bindings.switchTheme.find(e=>e.themeName===s);l&&Player.set("hotkey_bindings.switchTheme",Player.config.hotkey_bindings.switchTheme.splice(l,1),{bypassValidation:!0})},_restoreDefaults:function(){Object.assign(Player.config.savedThemes,Player.settings.findDefault("savedThemes").default),Player.theme.validateOrder(),Player.set("savedThemes",Player.config.savedThemes,{bypassValidation:!0})},_showSaveOptions:function(e,a){a.stopPropagation();const n=Player.$(`.${ns}-theme-save-options`);if(n)return Player.container.removeChild(n);const o=t.element(l({settingsConfig:s}),Player.container);Player.position.showRelativeTo(o,a.eventTarget),Player.$(`.${ns}-save-theme-name`).focus()},_toggleSaveFields:function(){Player.$(`.${ns}-theme-save-options`).classList.toggle("fields-collapsed"),Player.position.showRelativeTo(Player.$(`.${ns}-theme-save-options`),Player.$('[data-handler="theme._showSaveOptions"]'))},_save:function(e){e.preventDefault();const a=Player.$(`.${ns}-save-theme-name`).value;if(!a)return Player.logError("A name is required to save a theme.",null,"warning");const n=[...Player.$all(`.${ns}-theme-save-options input:checked`)].reduce((e,a)=>t.set(e,a.value,t.get(Player.config,a.value)),{});Player.config.savedThemes[a]=n,-1===Player.config.savedThemesOrder.indexOf(a)&&Player.config.savedThemesOrder.push(a),Player.set("savedThemes",Player.config.savedThemes,{bypassValidation:!0}),Player.container.removeChild(Player.$(`.${ns}-theme-save-options`))}}}).call(this,a(0))},function(e,t,a){(function(t){e.exports=(e={})=>`<div class="${ns}-theme-save-options  ${ns}-dialog fields-collapsed dialog" data-allow-click="true" style="top: 0px; left: 0px;">\n\t<div class="${ns}-row ${ns}-align-center">\n\t\t<div class="${ns}-col">\n\t\t\t<input type="text" class="${ns}-save-theme-name" placeholder="Name">\n\t\t</div>\n\t\t<div class="${ns}-col">\n\t\t\t<a class="${ns}-save-theme" href="#">Create</a>\n\t\t</div>\n\t</div>\n\t<a class="${ns}-row ${ns}-toggle-theme-save-fields" href="#" style="margin: .25rem 0">\n\t\t<span style="margin-right: .25rem">Included Settings</span>\n\t\t${t.chevronDown}\n\t\t${t.chevronUp}\n\t</a>\n\t${function e(t,a){return t.map(t=>{const n=t.property&&"theme_field-"+t.property.replace(/\./g,"_");return t.settings?e(t.settings,t):{...a||{},...t}.allowInTheme||t.themeField?`<div><input type="checkbox" id="${n}" value="${t.property}" ${t.themeField?"checked":""}><label for="${n}">${a?(a.themeFieldTitle||a.title)+": ":""}${t.title}</label></div>`:""}).join("")}(e.settingsConfig)}\n</div>`}).call(this,a(1))},function(e,t,a){(function(t){e.exports=(e={})=>`<div class="${ns}-row ${ns}-saved-themes">\n\t<div class="${ns}-row ${ns}-align-start ${ns}-sub-settings" data-theme="Default" style="order: -1">\n\t\t<div class="${ns}-col ${ns}-space-between">Default</div>\n\t\t<div class="${ns}-col">\n\t\t\t<a href="#" class="${ns}-heading-action ${ns}-apply-theme" data-handler="theme._apply" data-property="savedTheme">${"Default"===Player.config.selectedTheme?t.checkSquare:t.square}</a>\n\t\t</div>\n\t</div>\n\t${Player.config.savedThemesOrder.map((e,a)=>`\n\t\t<div class="${ns}-row ${ns}-align-start ${ns}-sub-settings" data-theme="${e}" style="order: ${a}">\n\t\t\t<div class="${ns}-col ${ns}-space-between">${e}</div>\n\t\t\t<div class="${ns}-col">\n\t\t\t\t<a href="#" class="${ns}-heading-action ${ns}-apply-theme" data-handler="theme._apply" data-property="savedTheme">${Player.config.selectedTheme===e?t.checkSquare:t.square}</a>\n\t\t\t\t<a href="#" class="${ns}-heading-action ${ns}-move-theme-up ${0===a?"disabled":""}" data-handler="theme._moveUp" data-property="savedTheme">${t.arrowUp}</a>\n\t\t\t\t<a href="#" class="${ns}-heading-action ${ns}-move-theme-down ${a===Player.config.savedThemesOrder.length-1?"disabled":""}" data-handler="theme._moveDown" data-property="savedTheme">${t.arrowDown}</a>\n\t\t\t\t<a href="#" class="${ns}-heading-action ${ns}-remove-theme" data-handler="theme._remove" data-property="savedTheme">${t.trash}</a>\n\t\t\t</div>\n\t\t</div>\n\t`).join("")}\n</div>`}).call(this,a(1))},function(e,t){e.exports=(e={})=>["Default"].concat(Player.config.savedThemesOrder).map(e=>`\n\t<div class="${ns}-row ${ns}-select-themes">\n\t\t<div class="${ns}-col"><span style="padding-left: .5rem">- ${e}</span></div>\n\t\t<div class="${ns}-col" data-name="${e}">\n\t\t\t<input\n\t\t\t\ttype="text"\n\t\t\t\tclass="${ns}-key-input"\n\t\t\t\tvalue="${Player.hotkeys.stringifyKey(Player.config.hotkey_bindings.switchTheme.find(t=>t.themeName===e)||{key:""})}"\n\t\t\t\tdata-property="hotkey_bindings.switchTheme"\n\t\t\t/>\n\t\t</div>\n\t</div>\n`).join("")},function(e,t,a){(function(t){const{parseFileName:n}=a(4),{get:s}=a(87);e.exports={template:a(88),boardsTemplate:a(89),listsTemplate:a(90),boardList:null,soundThreads:null,displayThreads:{},selectedBoards:Board?[Board]:["a"],showAllBoards:!1,delegatedEvents:{click:{[`.${ns}-fetch-threads-link`]:"threads.fetch",[`.${ns}-all-boards-link`]:"threads.toggleBoardList",[`.${ns}-threads-view-style`]:"threads.toggleView"},keyup:{[`.${ns}-threads-filter`]:e=>Player.threads.filter(e.eventTarget.value)},change:{[`.${ns}-threads input[type=checkbox]`]:"threads.toggleBoard"}},initialize:async function(){Player.threads.hasParser=is4chan&&"undefined"!=typeof Parser,Player.threads.hasParser&&!Parser.customSpoiler&&(Parser.customSpoiler={}),Player.on("show",Player.threads._initialFetch),Player.on("view",Player.threads._initialFetch),Player.on("rendered",Player.threads.afterRender),Player.on("config:threadsViewStyle",Player.threads.render);try{const e=await GM.getValue("threads_board_selection");e&&(Player.threads.selectedBoards=e.split(","))}catch(e){}},_initialFetch:function(){Player.container&&"threads"===Player.config.viewStyle&&null===Player.threads.boardList&&Player.threads.fetchBoards(!0)},render:function(){Player.container&&(Player.$(`.${ns}-threads`).innerHTML=Player.threads.template(),Player.threads.afterRender())},afterRender:function(){const e=Player.$(`.${ns}-thread-list`);if(e){const t=document.defaultView.getComputedStyle(document.body);e.style.background=t.backgroundColor,e.style.backgroundImage=t.backgroundImage,e.style.backgroundRepeat=t.backgroundRepeat,e.style.backgroundPosition=t.backgroundPosition}Player.threads.renderThreads()},toggleView:function(e){e.preventDefault(),Player.set("threadsViewStyle",e.eventTarget.getAttribute("data-style"))},renderThreads:function(){if(Player.threads.hasParser&&"table"!==Player.config.threadsViewStyle)try{const e=Player.$(`.${ns}-thread-list`);e.innerHTML="";for(let a in Player.threads.displayThreads){const n=Player.threads.boardList.find(e=>e.board===a),s=`/${n.board}/ - ${n.title}`;t.element(`<div class="boardBanner"><div class="boardTitle">${s}</div></div>`,e);const l=Player.threads.displayThreads[a];for(let a=0;a<l.length;a++)e.appendChild(Parser.buildHTMLFromJSON.call(Parser,l[a],l[a].board,!0,!0)),t.element('<hr style="clear: both">',e)}}catch(e){Player.logError("Unable to display the threads board view.",e,"warning"),Player.set("threadsViewStyle","table"),Player.renderThreads()}else Player.$(`.${ns}-threads-body`).innerHTML=Player.threads.listsTemplate()},renderBoards:function(){Player.$(`.${ns}-thread-board-list`).innerHTML=Player.threads.boardsTemplate()},toggle:function(e){e&&e.preventDefault(),"threads"===Player.config.viewStyle?Player.playlist.restore():Player.display.setViewStyle("threads")},toggleBoardList:function(e){e.preventDefault(),Player.threads.showAllBoards=!Player.threads.showAllBoards,Player.$(`.${ns}-all-boards-link`).innerHTML=Player.threads.showAllBoards?"Selected Only":"Show All",Player.threads.renderBoards()},toggleBoard:async function(e){const t=e.eventTarget.value;e.eventTarget.checked?!Player.threads.selectedBoards.includes(t)&&Player.threads.selectedBoards.unshift(t):Player.threads.selectedBoards=Player.threads.selectedBoards.filter(e=>e!==t),await GM.setValue("threads_board_selection",Player.threads.selectedBoards.slice(0,10).join(","))},fetchBoards:async function(e){Player.threads.loading=!0,Player.threads.render(),Player.threads.boardList=(await s("https://a.4cdn.org/boards.json")).boards,e?Player.threads.fetch():(Player.threads.loading=!1,Player.threads.render())},fetch:async function(e){if(e&&e.preventDefault(),Player.threads.loading=!0,Player.threads.render(),!Player.threads.boardList)try{await Player.threads.fetchBoards()}catch(e){return Player.logError("Failed fetching the boards list.",e)}const t=[];try{await Promise.all(Player.threads.selectedBoards.map(async e=>{const a=Player.threads.boardList.find(t=>t.board===e);if(!a)return;(a&&await s("https://a.4cdn.org/%s/catalog.json".replace("%s",e))||[]).forEach(({page:n,threads:s})=>{t.push(...s.map(t=>Object.assign(t,{board:e,page:n,ws_board:a.ws_board})))})})),Player.threads.soundThreads=t.filter(e=>n(e.filename,`https://i.4cdn.org/${e.board}/${e.tim}${e.ext}`,e.no,`https://i.4cdn.org/${e.board}/${e.tim}s${e.ext}`,e.md5,!0).length)}catch(e){Player.logError("Failed searching for sounds threads.",e)}Player.threads.loading=!1,Player.threads.filter(Player.$(`.${ns}-threads-filter`).value,!0),Player.threads.render()},filter:function(e,t){e=e.toLowerCase(),Player.threads.filterValue=e||"",null!==Player.threads.soundThreads&&(Player.threads.displayThreads=Player.threads.soundThreads.reduce((t,a)=>((!e||a.sub&&a.sub.toLowerCase().includes(e)||a.com&&a.com.toLowerCase().includes(e))&&(t[a.board]||(t[a.board]=[]),t[a.board].push(a)),t),{}),!t&&Player.threads.renderThreads())}}}).call(this,a(0))},function(e,t){const a={};e.exports={get:async function(e){return new Promise((function(t,n){const s={};a[e]&&(s["If-Modified-Since"]=a[e].lastModified),GM.xmlHttpRequest({method:"GET",url:e,headers:s,responseType:"json",onload:n=>{n.status>=200&&n.status<300&&(a[e]={lastModified:n.responseHeaders["last-modified"],response:n.response}),t(304===n.status?a[e].response:n.response)},onerror:n})}))}}},function(e,t){e.exports=(e={})=>`<div class="${ns}-heading ${ns}-has-description" title="Search for threads with a sound OP">\n\tActive Threads\n\t${Player.threads.loading?"":`- <a class="${ns}-fetch-threads-link ${ns}-heading-action" href="#">Update</a>`}\n</div>\n<div style="display: ${Player.threads.loading?"block":"none"}">Loading</div>\n<div style="display: ${Player.threads.loading?"none":"block"}">\n\t<div class="${ns}-heading ${ns}-has-description" title="Only includes threads containing the search.">\n\t\tFilter\n\t</div>\n\t<input type="text" class="${ns}-threads-filter" value="${Player.threads.filterValue||""}"></input>\n\t<div class="${ns}-heading">\n\t\tBoards - <a class="${ns}-all-boards-link ${ns}-heading-action" href="#">${Player.threads.showAllBoards?"Selected Only":"Show All"}</a>\n\t</div>\n\t<div class="${ns}-thread-board-list">\n\t\t${Player.threads.boardsTemplate(e)}\n\t</div>\n\t${Player.threads.hasParser?`<div class="${ns}-heading" style="text-align: center">\n\t\t\t${"table"!==Player.config.threadsViewStyle?`<a class="${ns}-threads-view-style ${ns}-heading-action" style="margin: 0" data-style="table" href="#">Table</a>`:"<span>Table</span>"}\n\t\t\t|\n\t\t\t${"board"!==Player.config.threadsViewStyle?`<a class="${ns}-threads-view-style ${ns}-heading-action" style="margin: 0" data-style="board" href="#">Board</a>`:"<span>Board</span>"}\n\t\t</div>`:""}\n\t${Player.threads.hasParser&&"table"!==Player.config.threadsViewStyle?`<div class="${ns}-thread-list"></div>`:`<table>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Thread</th>\n\t\t\t\t\t<th>Subject</th>\n\t\t\t\t\t<th>Replies/Images</th>\n\t\t\t\t\t<th>Started</th>\n\t\t\t\t\t<th>Updated</th>\n\t\t\t\t<tr>\n\t\t\t\t<tbody class="${ns}-threads-body"></tbody>\n\t\t\t</table>`}\n</div>`},function(e,t){e.exports=(e={})=>(Player.threads.boardList||[]).map(e=>{let t=Player.threads.selectedBoards.includes(e.board);return t||Player.threads.showAllBoards?`<label>\n\t\t\t<input type="checkbox" value="${e.board}" ${t?"checked":""}>\n\t\t\t/${e.board}/\n\t\t</label>`:""}).join("")},function(e,t,a){(function(t){e.exports=(e={})=>Object.keys(Player.threads.displayThreads).reduce((e,a)=>e.concat(Player.threads.displayThreads[a].map(e=>`\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<a class="quotelink" href="//boards.${e.ws_board?"4channel":"4chan"}.org/${e.board}/thread/${e.no}#p${e.no}" target="_blank">\n\t\t\t\t\t>>>/${e.board}/${e.no}\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t\t<td>${e.sub||""}</td>\n\t\t\t<td>${e.replies} / ${e.images}</td>\n\t\t\t<td>${t.timeAgo(e.time)}</td>\n\t\t\t<td>${t.timeAgo(e.last_modified)}</td>\n\t\t</tr>\n\t`)),[]).join("")}).call(this,a(0))},function(e,t,a){(function(t,n){e.exports={template:a(92),hasFFmpeg:"function"==typeof ffmpeg,_uploadIdx:0,createStatusText:"",delegatedEvents:{click:{[`.${ns}-create-button`]:"tools._handleCreate",[`.${ns}-create-sound-post-link`]:"tools._addCreatedToQR",[`.${ns}-create-sound-add-link`]:"tools._addCreatedToPlayer",[`.${ns}-toggle-sound-input`]:"tools._handleToggleSoundInput",[`.${ns}-host-setting-link`]:t.noDefault(()=>Player.settings.toggle("Hosts")),[`.${ns}-remove-file`]:"tools._handleFileRemove"},change:{[`.${ns}-create-sound-img`]:"tools._handleImageSelect",[`.${ns}-create-sound-form input[type=file]`]:e=>Player.tools._handleFileSelect(e.eventTarget),[`.${ns}-use-video`]:"tools._handleWebmSoundChange"},drop:{[`.${ns}-create-sound-form`]:"tools._handleCreateSoundDrop"},keyup:{[`.${ns}-encoded-input`]:"tools._handleEncoded",[`.${ns}-decoded-input`]:"tools._handleDecoded"}},initialize:function(){Player.on("config:uploadHosts",Player.tools.render),Player.on("config:defaultUploadHost",e=>Player.$(`.${ns}-create-sound-host`).value=e),Player.on("rendered",Player.tools.afterRender)},render:function(){Player.$(`.${ns}-tools`).innerHTML=Player.tools.template(),Player.tools.afterRender()},afterRender:function(){Player.tools.status=Player.$(`.${ns}-create-sound-status`),Player.tools.imgInput=Player.$(`.${ns}-create-sound-img`),Player.tools.sndInput=Player.$(`.${ns}-create-sound-snd`)},toggle:function(e){e&&e.preventDefault(),"tools"===Player.config.viewStyle?Player.playlist.restore():Player.display.setViewStyle("tools")},updateCreateStatus:function(e){Player.tools.status.style.display=e?"inherit":"none",Player.tools.status.innerHTML=Player.tools.createStatusText=e},_handleDecoded:function(e){Player.$(`.${ns}-encoded-input`).value=encodeURIComponent(e.eventTarget.value)},_handleEncoded:function(e){Player.$(`.${ns}-decoded-input`).value=decodeURIComponent(e.eventTarget.value)},_handleImageSelect:async function(e){const t=(e&&e.eventTarget||Player.tools.imgInput).files[0],a="video/webm"===t.type;let n=t.name.replace(/\.[^/.]+$/,"");if(Player.tools.hasFFmpeg){Player.$(`.${ns}-use-video-label`).style.display=a?"inherit":"none";const e=Player.$(`.${ns}-use-video`);e.checked&&a&&Player.tools._handleFileSelect(Player.tools.sndInput,[t]),e.checked&&!a&&e.click()}else await Player.tools.hasAudio(t)&&Player.logError("Audio not allowed for the image webm.",null,"warning");Player.$(`.${ns}-create-sound-name`).setAttribute("placeholder",n)},_handleFileSelect:function(e,t){const a=e.closest(`.${ns}-file-input`),s=a.querySelector(".text"),l=a.querySelector(`.${ns}-file-list`);t||(t=[...e.files]),a.classList[t.length?"remove":"add"]("placeholder"),s.innerHTML=t.length>1?t.length+" files":t[0]&&t[0].name||"",l&&(l.innerHTML=t.length<2?"":t.map((e,t)=>`<div class="${ns}-row">\n\t\t\t\t<div class="${ns}-col ${ns}-truncate-text">${e.name}</div>\n\t\t\t\t<a class="${ns}-col-auto ${ns}-remove-file" href="#" data-idx="${t}">${n.close}</a>\n\t\t\t</div>`).join(""))},_handleFileRemove:function(e){e.preventDefault();const t=+e.eventTarget.getAttribute("data-idx"),a=e.eventTarget.closest(`.${ns}-file-input`).querySelector('input[type="file"]'),n=new DataTransfer;for(let e=0;e<a.files.length;e++)e!==t&&n.items.add(a.files[e]);a.files=n.files,Player.tools._handleFileSelect(a)},_handleWebmSoundChange:function(e){const t=Player.tools.sndInput,a=Player.tools.imgInput;Player.tools._handleFileSelect(t,e.eventTarget.checked&&[a.files[0]])},_handleToggleSoundInput:function(e){e.preventDefault();const t="url"===e.eventTarget.getAttribute("data-type");Player.$(`.${ns}-create-sound-snd-url`).closest(`.${ns}-row`).style.display=t?null:"none",Player.$(`.${ns}-create-sound-snd`).closest(`.${ns}-file-input`).style.display=t?"none":null,Player.tools.useSoundURL=t},_handleCreateSoundDrop:function(e){e.preventDefault(),e.stopPropagation();const t="INPUT"===e.target.nodeName&&"file"===e.target.getAttribute("type")&&e.target;return[...e.dataTransfer.files].forEach(e=>{const a=e.type.startsWith("video"),n=e.type.startsWith("image")||"video/webm"===e.type,s=e.type.startsWith("audio");if(a||n||s){const a="video/webm"===e.type&&t?t:n?Player.tools.imgInput:Player.tools.sndInput,s=new DataTransfer;a.multiple&&[...a.files].forEach(e=>s.items.add(e)),s.items.add(e),a.files=s.files,Player.tools._handleFileSelect(a),a===Player.tools.imgInput&&Player.tools._handleImageSelect()}}),!1},_handleCreate:async function(e){e&&e.preventDefault(),Player.tools._createdImageURL&&URL.revokeObjectURL(Player.tools._createdImageURL),Player.tools._createdImage=null,Player.tools.updateCreateStatus("Creating sound image"),Player.$(`.${ns}-create-button`).disabled=!0;const t=Player.config.uploadHosts[Player.$(`.${ns}-create-sound-host`).value],a=Player.tools.useSoundURL;let n=Player.tools.imgInput.files[0],s=a&&Player.$(`.${ns}-create-sound-snd-url`).value.split(",").map(e=>e.trim()).filter(e=>e),l=(Player.$(`.${ns}-use-video`)||{}).checked&&n&&n.type.startsWith("video")?n&&[n]:[...Player.tools.sndInput.files];const o=Player.$(`.${ns}-create-sound-name`).value,r=o?((s||l).length>1?o.split(","):[o]).map(e=>e.trim()):n&&[n.name.replace(/\.[^/.]+$/,"")];try{if(!n)throw new PlayerError("Select an image or webm.","warning");if(n.type.startsWith("video")&&await Player.tools.hasAudio(n)){if(!Player.tools.hasFFmpeg)throw Player.tools.updateCreateStatus(Player.tools.createStatusText+"<br>Audio not allowed for the image webm.<br>Remove the audio from the webm and try again."),new PlayerError("Audio not allowed for the image webm.","warning");n=await Player.tools.extract(n,"video")}const e=r.join("").length+8*(s||l).length;if(a){try{s=s.map(e=>new URL(e)&&e.replace(/^(https?:)?\/\//,""))}catch(e){throw new PlayerError("The provided sound URL is invalid.","warning")}if(218<e+s.join("").length)throw new PlayerError("The generated image filename is too long.","warning")}else{if(!l||!l.length)throw new PlayerError("Select a sound.","warning");if(t.filenameLength?218<e+t.filenameLength*l.length:l.length>8)throw new PlayerError("The generated image filename is too long.","warning");l=await Promise.all(l.map(async e=>{if(e.type.startsWith("video")){if(!await Player.tools.hasAudio(e))throw new PlayerError(`The selected video has no audio. (${e.name})`,"warning");if(Player.tools.hasFFmpeg)return await Player.tools.extract(e,"audio")}return e}));try{s=await Promise.all(l.map(async e=>Player.tools.postFile(e,t)))}catch(e){throw new PlayerError("Upload failed.","error",e)}}if(!s.length)throw new PlayerError("No sounds selected.","warning");let o="";for(let e=0;e<s.length;e++)o+=(r[e]||"")+"[sound="+encodeURIComponent(s[e].replace(/^(https?:)?\/\//,""))+"]";const i=n.name.match(/\.([^/.]+)$/)[1],d=new File([n],o+"."+i,{type:n.type});Player.tools._createdImage=d,Player.tools._createdImageURL=URL.createObjectURL(d),Player.tools.updateCreateStatus(Player.tools.createStatusText+"<br>Complete!<br>"+(is4chan?`<a href="#" class="${ns}-create-sound-post-link">Post</a> - `:"")+` <a href="#" class="${ns}-create-sound-add-link">Add</a> - `+` <a href="${Player.tools._createdImageURL}" download="${d.name}" title="${d.name}">Download</a>`)}catch(e){Player.tools.updateCreateStatus(Player.tools.createStatusText+"<br>Failed! "+(e instanceof PlayerError?e.reason:"")),Player.logError("Failed to create sound image",e)}Player.$(`.${ns}-create-button`).disabled=!1},hasAudio:function(e){return!(!e.type.startsWith("audio")&&!e.type.startsWith("video"))&&new Promise((t,a)=>{const n=URL.createObjectURL(e),s=document.createElement("video");s.addEventListener("loadeddata",()=>{URL.revokeObjectURL(n),t(s.mozHasAudio||!!s.webkitAudioDecodedByteCount)}),s.addEventListener("error",a),s.src=n})},extract:async function(e,t){if(Player.tools.updateCreateStatus(Player.tools.createStatusText+"<br>Extracting "+t),"function"!=typeof ffmpeg)return e;const a=e.name.replace(/\.[^/.]+$/,"")+("audio"===t?".ogg":".webm"),n=ffmpeg({MEMFS:[{name:"_"+e.name,data:await new Response(e).arrayBuffer()}],arguments:"audio"===t?["-i","_"+e.name,"-vn","-c","copy",a]:["-i","_"+e.name,"-an","-c","copy",a]});return new File([n.MEMFS[0].data],a,{type:"audio"===t?"audio/ogg":"video/webm"})},postFile:async function(e,a){const n=Player.tools._uploadIdx++;if(!a||a.invalid)throw new PlayerError("Invalid upload host.","error");const s=new FormData;return Object.keys(a.data).forEach(t=>{null!==a.data[t]&&s.append(t,"$file"===a.data[t]?e:a.data[t])}),Player.tools.updateCreateStatus(Player.tools.createStatusText+`<br><span class="${ns}-upload-status-${n}">Uploading ${e.name}</span>`),new Promise((l,o)=>{GM.xmlHttpRequest({method:"POST",url:a.url,data:s,responseType:a.responsePath?"json":"text",headers:a.headers,onload:async s=>{if(s.status<200||s.status>=300)return o(s);const r=a.responsePath?t.get(s.response,a.responsePath):a.responseMatch?(s.responseText.match(new RegExp(a.responseMatch))||[])[1]:s.responseText,i=a.soundUrl?a.soundUrl.replace("%s",r):r;Player.$(`.${ns}-upload-status-${n}`).innerHTML=`Uploaded ${e.name} to <a href="${i}" target="_blank">${i}</a>`,Player.tools.createStatusText=Player.tools.status.innerHTML,l(i)},upload:{onprogress:t=>{const a=t.total>0?t.total:e.size;Player.$(`.${ns}-upload-status-${n}`).innerHTML=`Uploading ${e.name} - ${Math.floor(t.loaded/a*100)}%`}},onerror:o})})},_addCreatedToPlayer:function(e){e.preventDefault(),Player.playlist.addFromFiles([Player.tools._createdImage])},_addCreatedToQR:function(e){if(!is4chan)return;e.preventDefault();const t=document.querySelector(isChanX?".qr-link":".open-qr-link"),a=new DataTransfer;if(a.items.add(Player.tools._createdImage),isChanX){t.click();const e=new CustomEvent("drop",{view:window,bubbles:!0,cancelable:!0});e.dataTransfer=a,document.querySelector("#qr").dispatchEvent(e)}else t?(t.click(),document.querySelector("#qrFile").files=a.files):(document.querySelector("#togglePostFormLink a").click(),document.querySelector("#postFile").files=a.files,document.querySelector(".postForm").scrollIntoView())}}}).call(this,a(0),a(1))},function(e,t,a){(function(t){e.exports=(e={})=>`<div class="${ns}-heading">Encode / Decode URL</div>\n<div class="${ns}-row">\n\t<div class="${ns}-col"><input type="text" class="${ns}-decoded-input" placeholder="https://"></div>\n<div class="${ns}-col"><input type="text" class="${ns}-encoded-input" placeholder="https%3A%2F%2F"></div>\n</div>\n\n<div class="${ns}-heading">\n\tCreate Sound Image\n</div>\n<div class="${ns}-create-sound-form">\n\t<div class="${ns}-row" style="margin-bottom: .5rem">\n\t\t${Player.display.ifNotDismissed("createSoundDetails","Show Help",`<div class="${ns}-col" data-dismiss-id="createSoundDetails">\n\t\t\tSelect an image and sound to combine as a sound image.\n\t\t\tThe sound will be uploaded to the selected file host and the url will be added to the image filename.\n\t\t\tIf you have an account for a host that you would like to use then make the required changes in the <a class="${ns}-host-setting-link" href="#">host config</a>.\n\t\t\tThat typically means providing a user token in the data or headers.<br>\n\t\t\t${Player.tools.hasFFmpeg?"Selecting a webm with audio as the image will split it into a video only webm to be posted and ogg audio file to be uploaded.":"For a webm with audio first split the webm into a separate video and audio file and select them both."}\n\t\t\t<br>\n\t\t\tMultiple sound files, or a comma-separated list of sound URLs, can be given for a single image.\n\t\t\tIf you do have multiple sounds the name will also be a considered comma-separated list.<br>\n\t\t\t<a href="javascript:;" class="${ns}-dismiss-link" data-dismiss="createSoundDetails">Dismiss</a>\n\t\t</div>`)}\n\t</div>\n\t<div class="${ns}-row">\n\t\tHost\n\t</div>\n\t<div class="${ns}-row">\n\t\t<div class="${ns}-col">\n\t\t\t<select class="${ns}-create-sound-host">\n\t\t\t\t${Object.keys(Player.config.uploadHosts).map((e,t)=>Player.config.uploadHosts[e]&&!Player.config.uploadHosts[e].invalid?`<option value="${e}" ${Player.config.defaultUploadHost===e?"selected":""}>${e}</option>`:"").join("")}\n\t\t\t</select>\n\t\t</div>\n\t</div>\n\t<div class="${ns}-row" style="margin-top: .25rem">\n\t\tData\n\t</div>\n\t<div class="${ns}-row">\n\t\t<div class="${ns}-col">\n\t\t\t<input type="text" class="${ns}-create-sound-name" placeholder="Name/s">\n\t\t</div>\n\t</div>\n\t<div class="${ns}-row">\n\t\t<div class="${ns}-col">\n\t\t\t<div class="${ns}-file-input placeholder">\n\t\t\t\t<div class="${ns}-file-overlay">\n\t\t\t\t<span class="placeholder-text">Select/Drop Image</span>\n\t\t\t\t<span class="text"></span>\n\t\t\t\t<input class="${ns}-create-sound-img" type="file" accept="image/*,.webm">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="${ns}-col">\n\t\t\t<div class="${ns}-file-input placeholder" ${Player.tools.useSoundURL?"display: none;":""}>\n\t\t\t\t<div class="${ns}-file-overlay">\n\t\t\t\t\t<span class="placeholder-text">Select/Drop Sound/s</span>\n\t\t\t\t\t<span class="text"></span>\n\t\t\t\t\t<div class="overfile ${ns}-input-append">\n\t\t\t\t\t\t${Player.tools.hasFFmpeg&&`<label class="${ns}-use-video-label" style="display: none;">Use video<input type="checkbox" class="${ns}-use-video"></label>`||""}\n\t\t\t\t\t\t<a href="#" class="${ns}-toggle-sound-input" data-type="url" title="Enter a URL of a previously uploaded file.">${t.link}</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<input class="${ns}-create-sound-snd" type="file" accept="audio/*,video/*" multiple>\n\t\t\t\t</div>\n\t\t\t\t<div class="${ns}-file-list"></div>\n\t\t\t</div>\n\t\t\t<div class="${ns}-row ${ns}-align-center" style="position: relative; ${Player.tools.useSoundURL?"":"display: none;"}">\n\t\t\t\t<a href="#" class="${ns}-toggle-sound-input ${ns}-input-append" data-type="file" title="Select a file to upload.">\n\t\t\t\t\t${t.fileEarmarkMusic}\n\t\t\t\t</a>\n\t\t\t\t<input type="text" class="${ns}-create-sound-snd-url" placeholder="Sound URL/s" style="min-width: 100%;">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="${ns}-row" style="margin-top: .5rem">\n\t\t<div class="${ns}-col-auto">\n\t\t\t<button class="${ns}-create-button">Create</button>\n\t\t</div>\n\t</div>\n</div>\n<div class="${ns}-create-sound-status" ${Player.tools.createStatusText?"":'style="display: none"'}>\n\t${Player.tools.createStatusText}\n</div>`}).call(this,a(1))},function(e,t,a){(function(t){const n=a(94),s=a(95),l=/p: ?{([^}]*)}/g,o=/h: ?{([^}]*)}/g,r=new RegExp(`(${n.map(e=>e.tplName).join("|")})-(?:button|link)(?:\\:"([^"]+?)")?`,"g"),i=/sound-title/g,d=/sound-title-marquee/g,c=/sound-index/g,u=/sound-count/g,p=/sound-(src|id|name|post|imageOrThumb|image|thumb|filename|imageMD5)/g,y=/\$config\[([^\]]+)\]/g,h=[];e.exports={buttons:n,delegatedEvents:{click:{[`.${ns}-playing-jump-link`]:()=>Player.playlist.scrollToPlaying("center"),[`.${ns}-viewStyle-button`]:"playlist.toggleView",[`.${ns}-hoverImages-button`]:"playlist.toggleHoverImages",[`.${ns}-remove-link`]:"userTemplate._handleRemove",[`.${ns}-filter-link`]:"userTemplate._handleFilter",[`.${ns}-download-link`]:"userTemplate._handleDownload",[`.${ns}-shuffle-button`]:"userTemplate._handleShuffle",[`.${ns}-repeat-button`]:"userTemplate._handleRepeat",[`.${ns}-reload-button`]:t.noDefault("playlist.refresh"),[`.${ns}-add-button`]:t.noDefault(()=>Player.$(`.${ns}-add-local-file-input`).click()),[`.${ns}-item-menu-button`]:"playlist._handleItemMenu",[`.${ns}-view-menu-button`]:"userTemplate._handleViewsMenu",[`.${ns}-threads-button`]:"threads.toggle",[`.${ns}-tools-button`]:"tools.toggle",[`.${ns}-config-button`]:t.noDefault(()=>Player.settings.toggle()),[`.${ns}-favorites-button`]:"favorites.toggle",[`.${ns}-player-button`]:"playlist.restore"},change:{[`.${ns}-add-local-file-input`]:"userTemplate._handleFileSelect"}},initialize:function(){Player.on("config",Player.userTemplate._handleConfig),Player.on("playsound",()=>Player.userTemplate._handleEvent("playsound")),["add","remove","order","show","hide","stop"].forEach(e=>{Player.on(e,Player.userTemplate._handleEvent.bind(null,e))})},build:function(e){const a=e.outerClass||"",s=e.sound&&e.sound.title||e.defaultName,h=t=>"function"==typeof t?t(e):t;let g=e.template.replace(y,(...e)=>t.get(Player.config,e[1]));if(!e.ignoreDisplayBlocks&&(g=g.replace(l,Player.playing&&Player.playing===e.sound?"$1":"").replace(o,`<span class="${ns}-hover-display ${a}">$1</span>`)),!e.ignoreButtons&&(g=g.replace(r,(function(s,l,o){let r=n.find(e=>e.tplName===l);if(r.requireSound&&!e.sound||r.showIf&&!r.showIf(e))return"";if(r.values){let e=r;const a=r.values[t.get(Player.config,r.property)]||r.values[Object.keys(r.values)[0]];r={...e,...a,class:((e.class||"")+" "+(a.class||"")).trim()}}const i=[...h(r.attrs)||[]];return i.some(e=>e.startsWith("href"))||i.push('href="javascript:;"'),(r.class||a)&&i.push(`class="${r.class||""} ${a||""}"`),`<a ${i.join(" ")}>${o||h(r.icon)||h(r.text)}</a>`}))),!e.ignoreSoundName&&(g=g.replace(d,s?`<div class="${ns}-col ${ns}-truncate-text" style="margin: 0 .5rem; text-overflow: clip;"><span title="${s}" class="${ns}-title-marquee" data-location="${e.location||""}">${s}</span></div>`:"").replace(i,s?`<div class="${ns}-col ${ns}-truncate-text" style="margin: 0 .5rem"><span title="${s}">${s}</span></div>`:"")),!e.ignoreSoundProperties&&(g=g.replace(p,(...t)=>e.sound?e.sound[t[1]]:"").replace(c,e.sound?Player.sounds.indexOf(e.sound)+1:0).replace(u,Player.sounds.length)),!e.ignoreVersion&&(g=g.replace(/%v/g,"3.3.1-6627bac")),e.replacements)for(let t of Object.keys(e.replacements))g=g.replace(new RegExp(t,"g"),e.replacements[t]);return g},maintain:function(e,t,a=[],n=[]){h.push({component:e,property:t,...Player.userTemplate.findDependencies(t,null),alwaysRenderConfigs:a,alwaysRenderEvents:n})},findDependencies:function(e,a){a||(a=t.get(Player.config,e));const s=[],o=u.test(a),d=i.test(a)||p.test(a),h=c.test(a),g=l.test(a);o&&s.push("add","remove"),"rowTemplate"!==e&&(d||h||g)&&s.push("playsound","stop"),h&&s.push("order");const f=[];let m;for(;null!==(m=r.exec(a));)if(!m[2]){let e=m[1],t=n.find(t=>t.tplName===e);t.property&&f.push(t.property)}for(;null!==(m=y.exec(a));)f.push(m[1]);return{events:s,config:f}},_handleConfig:function(e,t){h.forEach(a=>{a.property===e&&(Object.assign(a,Player.userTemplate.findDependencies(e,t)),a.component.render())}),h.forEach(t=>{(t.alwaysRenderConfigs.includes(e)||t.config.includes(e))&&t.component.render()})},_handleEvent:function(e){h.forEach(t=>{(t.alwaysRenderEvents.includes(e)||t.events.includes(e))&&t.component.render()})},_handleFileSelect:function(e){e.preventDefault();const t=e.eventTarget;Player.playlist.addFromFiles(t.files)},_handleRepeat:function(e){e.preventDefault();const t=["all","one","none"],a=t.indexOf(Player.config.repeat);Player.set("repeat",t[(a+4)%3])},_handleShuffle:function(e){if(e.preventDefault(),Player.set("shuffle",!Player.config.shuffle),Player.header.render(),Player.config.shuffle){const e=Player.sounds;for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}}else Player.sounds.sort((e,t)=>Player.compareIds(e.id,t.id));Player.trigger("order")},_handleViewsMenu:function(e){e.preventDefault(),e.stopPropagation();const a=t.element(s());Player.userTemplate._showMenu(e.eventTarget,a)},_showMenu:function(e,t,a){Player.display.closeDialogs(),a||(a=Player.container),a.appendChild(t),Player.position.showRelativeTo(t,e),t.querySelectorAll(".entry").forEach(e=>{e.addEventListener("mouseenter",Player.userTemplate._setFocusedMenuItem)}),Player.trigger("menu-open",t)},_setFocusedMenuItem:function(e){const t=e.currentTarget.querySelector(".submenu");e.currentTarget.closest(".dialog").querySelectorAll(".focused").forEach(e=>e.classList.remove("focused")),e.currentTarget.classList.add("focused"),t&&t.getBoundingClientRect().right>document.documentElement.clientWidth&&(t.style.inset="0px 100% auto auto")},_handleFilter:function(e){e.preventDefault();let t=e.eventTarget.getAttribute("data-filter");t&&Player.set("filters",Player.config.filters.concat(t))},_handleDownload:function(e){const a=e.eventTarget.getAttribute("data-src"),n=e.eventTarget.getAttribute("data-name")||new URL(a).pathname.split("/").pop();GM.xmlHttpRequest({method:"GET",url:a,responseType:"blob",onload:e=>{const a=t.element(`<a href="${URL.createObjectURL(e.response)}" download="${n}" rel="noopener" target="_blank"></a>`);a.click(),URL.revokeObjectURL(a.href)},onerror:e=>Player.logError("There was an error downloading.",e,"warning")})},_handleRemove:function(e){const t=e.eventTarget.getAttribute("data-id"),a=t&&Player.sounds.find(e=>e.id===""+t);a&&Player.remove(a)}}}).call(this,a(0))},function(e,t,a){(function(t){const{postIdPrefix:n}=a(2);e.exports=[{property:"repeat",tplName:"repeat",class:ns+"-repeat-button",values:{all:{attrs:['title="Repeat All"'],icon:t.arrowRepeat},one:{attrs:['title="Repeat One"'],icon:t.arrowClockwise},none:{attrs:['title="No Repeat"'],class:"muted",icon:t.arrowRepeat}}},{property:"shuffle",tplName:"shuffle",class:ns+"-shuffle-button",values:{true:{attrs:['title="Shuffled"'],icon:t.shuffle},false:{attrs:['title="Ordered"'],class:"muted",icon:t.shuffle}}},{property:"viewStyle",tplName:"playlist",class:ns+"-viewStyle-button",values:{default:{attrs:['title="Player"'],class:"muted",icon:()=>"playlist"===Player.playlist._lastView?t.arrowsExpand:t.arrowsCollapse},playlist:{attrs:['title="Hide Playlist"'],icon:t.arrowsExpand},image:{attrs:['title="Show Playlist"'],icon:t.arrowsCollapse}}},{property:"hoverImages",tplName:"hover-images",class:ns+"-hoverImages-button",values:{true:{attrs:['title="Hover Images Enabled"'],icon:t.image},false:{attrs:['title="Hover Images Disabled"'],class:"muted",icon:t.image}}},{tplName:"add",class:ns+"-add-button",icon:t.plus,attrs:['title="Add local files"']},{tplName:"reload",class:ns+"-reload-button",icon:t.reboot,attrs:['title="Reload the playlist"']},{property:"viewStyle",tplName:"settings",class:ns+"-config-button",icon:t.gear,attrs:['title="Settings"'],values:{default:{class:"muted"},settings:{}}},{property:"viewStyle",tplName:"threads",class:ns+"-threads-button",icon:t.search,attrs:['title="Threads"'],values:{default:{class:"muted"},threads:{}}},{property:"viewStyle",tplName:"tools",class:ns+"-tools-button",icon:t.tools,attrs:['title="Tools"'],values:{default:{class:"muted"},tools:{}}},{tplName:"close",class:ns+"-close-button",icon:t.close,attrs:['title="Hide the player"']},{tplName:"playing",requireSound:!0,class:ns+"-playing-jump-link",icon:t.musicNoteList,attrs:['title="Scroll the playlist currently playing sound."']},{tplName:"post",requireSound:!0,icon:t.chatRightQuote,showIf:e=>e.sound.post,attrs:e=>["href="+("#"+n+e.sound.post),'title="Jump to the post for the current sound"']},{tplName:"image",requireSound:!0,icon:t.image,attrs:e=>["href="+e.sound.image,'title="Open the image in a new tab"','target="_blank"']},{tplName:"sound",requireSound:!0,href:e=>e.sound.src,icon:t.soundwave,attrs:e=>["href="+e.sound.src,'title="Open the sound in a new tab"','target="_blank"']},{tplName:"dl-image",requireSound:!0,class:ns+"-download-link",icon:t.fileEarmarkImage,attrs:e=>['title="Download the image with the original filename"',`data-src="${e.sound.image}"`,`data-name="${e.sound.filename}"`]},{tplName:"dl-sound",requireSound:!0,class:ns+"-download-link",icon:t.fileEarmarkMusic,attrs:e=>['title="Download the sound"',`data-src="${e.sound.src}"`,`data-name="${e.sound.name}"`]},{tplName:"filter-image",requireSound:!0,class:ns+"-filter-link",icon:t.filter,showIf:e=>e.sound.imageMD5,attrs:e=>['title="Add the image MD5 to the filters."',`data-filter="${e.sound.imageMD5}"`]},{tplName:"filter-sound",requireSound:!0,class:ns+"-filter-link",icon:t.filter,attrs:e=>['title="Add the sound URL to the filters."',`data-filter="${e.sound.src.replace(/^(https?:)?\/\//,"")}"`]},{tplName:"remove",requireSound:!0,class:ns+"-remove-link",icon:t.trash,attrs:e=>['title="Filter the image."',`data-id="${e.sound.id}"`]},{tplName:"menu",requireSound:!0,class:ns+"-item-menu-button",icon:t.chevronDown,attrs:e=>["data-id="+e.sound.id]},{tplName:"view-menu",class:ns+"-view-menu-button",icon:t.chevronDown,attrs:['href="javascript:;"']}]}).call(this,a(1))},function(e,t,a){(function(t){e.exports=(e={})=>`<div class="${ns}-menu ${ns}-dialog dialog" id="menu" tabindex="0" data-type="post" style="position: fixed;">\n\t${["playlist","image"].includes(Player.config.viewStyle)?"":`<a class="${ns}-row nowrap ${ns}-align-center ${ns}-player-button entry" href="javascript:;"><div class="${ns}-col">Player</div><div class="${ns}-col-auto">${t.musicNoteList}</div></a>`}\n\t${"settings"===Player.config.viewStyle?"":`<a class="${ns}-row nowrap ${ns}-align-center ${ns}-config-button entry" href="javascript:;"><div class="${ns}-col">Settings</div><div class="${ns}-col-auto">${t.gear}</div></span></a>`}\n\t${"threads"===Player.config.viewStyle?"":`<a class="${ns}-row nowrap ${ns}-align-center ${ns}-threads-button entry" href="javascript:;"><div class="${ns}-col">Threads</div><div class="${ns}-col-auto">${t.search}</div></span></a>`}\n\t${"tools"===Player.config.viewStyle?"":`<a class="${ns}-row nowrap ${ns}-align-center ${ns}-tools-button entry" href="javascript:;"><div class="${ns}-col">Tools</div><div class="${ns}-col-auto">${t.tools}</div></span></a>`}\n</div>`}).call(this,a(1))}]);